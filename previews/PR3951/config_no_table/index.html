<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Creating custom configurations · ClimaAtmos.jl</title><meta name="title" content="Creating custom configurations · ClimaAtmos.jl"/><meta property="og:title" content="Creating custom configurations · ClimaAtmos.jl"/><meta property="twitter:title" content="Creating custom configurations · ClimaAtmos.jl"/><meta name="description" content="Documentation for ClimaAtmos.jl."/><meta property="og:description" content="Documentation for ClimaAtmos.jl."/><meta property="twitter:description" content="Documentation for ClimaAtmos.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="ClimaAtmos.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">ClimaAtmos.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../installation_instructions/">Installation instructions</a></li><li><a class="tocitem" href="../contributor_guide/">Contributor Guide</a></li><li><a class="tocitem" href="../equations/">Equations</a></li><li><a class="tocitem" href="../edmf_equations/">EDMF Equations</a></li><li><a class="tocitem" href="../diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../available_diagnostics/">Available Diagnostics</a></li><li><a class="tocitem" href="../diagnostic_edmf_equations/">Diagnostic EDMF Equations</a></li><li><a class="tocitem" href="../gravity_wave/">Gravity Wave Drag Parameterizations</a></li><li><a class="tocitem" href="../surface_albedo/">Ocean Surface Albedo Parameterization</a></li><li><a class="tocitem" href="../topography/">Topography Representation</a></li><li><a class="tocitem" href="../tracers/">Tracers</a></li><li><a class="tocitem" href="../implicit_solver/">Implicit Solver</a></li><li><a class="tocitem" href="../radiative_equilibrium/">Radiative Equilibrium</a></li><li><a class="tocitem" href="../single_column_prospect/">Single Column Model</a></li><li><a class="tocitem" href="../restarts/">Restarts and Checkpoints</a></li><li><a class="tocitem" href="../repl_scripts/">REPL scripts</a></li><li><input class="collapse-toggle" id="menuitem-18" type="checkbox"/><label class="tocitem" for="menuitem-18"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../perturbation_experiments/">Perturbation Experiments</a></li></ul></li><li><a class="tocitem" href="../config/">Configuration</a></li><li><a class="tocitem" href="../parameters/">Parameters</a></li><li><a class="tocitem" href="../longruns/">Longruns</a></li><li><a class="tocitem" href="../itime/">The time type</a></li><li><a class="tocitem" href="../api/">API</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Creating custom configurations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Creating custom configurations</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaAtmos.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaAtmos.jl/blob/main/docs/src/config_no_table.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Creating-custom-configurations"><a class="docs-heading-anchor" href="#Creating-custom-configurations">Creating custom configurations</a><a id="Creating-custom-configurations-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-custom-configurations" title="Permalink"></a></h1><p>To create a custom configuration, first make a .yml file. In the file, you can set configuration arguments as <code>key: value</code> pairs to override the default config. YAML parsing is fairly forgiving – values will generally be parsed to the correct type. The only exception is true/false strings. These need quotes around them, or they will be parsed to <code>Bool</code>s.</p><p>To start the model with a custom configuration, run:</p><p><code>julia --project=.buildkite .buildkite/ci_driver.jl --config_file &lt;yaml&gt;</code></p><h3 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h3><p>Below is the default Bomex configuration:</p><pre><code class="nohighlight hljs">initial_condition: &quot;Bomex&quot;
subsidence: &quot;Bomex&quot;
scm_coriolis: &quot;Bomex&quot;
ls_adv: &quot;Bomex&quot;
surface_setup: &quot;Bomex&quot;
turbconv: &quot;prognostic_edmfx&quot;
edmfx_upwinding: first_order
edmfx_entr_model: &quot;Generalized&quot;
edmfx_detr_model: &quot;Generalized&quot;
edmfx_sgs_mass_flux: true
edmfx_sgs_diffusive_flux: true
edmfx_nh_pressure: true
prognostic_tke: false
moist: &quot;equil&quot;
config: &quot;box&quot;
hyperdiff: true
x_max: 1e8
y_max: 1e8
z_max: 3e3
x_elem: 2
y_elem: 2
z_elem: 60
z_stretch: false
perturb_initstate: false
dt: &quot;5secs&quot;
t_end: &quot;6hours&quot;
dt_save_state_to_disk: &quot;10mins&quot;
toml: [toml/prognostic_edmfx.toml]</code></pre><p>Keys can also point to artifacts. As artifacts are folders, we specify both the artifact name, as we would from the REPL, and file to read from, separated by a <code>/</code>. For example, to drive a single column model with an external forcing file from GCM output, we include the following lines in the configuration:</p><pre><code class="nohighlight hljs">insolation: &quot;gcmdriven&quot;
external_forcing_file: artifact&quot;cfsite_gcm_forcing&quot;/HadGEM2-A_amip.2004-2008.07.nc</code></pre><p>To learn more about artifacts and how they&#39;re used in CliMA, visit <a href="https://github.com/CliMA/ClimaArtifacts">ClimaArtifacts.jl</a>.</p><p>To add a new configuration argument/key, open <code>.buildkite/default_config.yml</code>. Add an entry with the following format:</p><pre><code class="nohighlight hljs">&lt;argument_name&gt;:
    value: &lt;argument_value&gt;
    help: &lt;help string&gt;</code></pre><p>The <code>help</code> field is optional if you don&#39;t plan on making a permanent change to the configuration argument.</p><p>See below for the full list of configuration arguments.</p><h1 id="Common-Configurations"><a class="docs-heading-anchor" href="#Common-Configurations">Common Configurations</a><a id="Common-Configurations-1"></a><a class="docs-heading-anchor-permalink" href="#Common-Configurations" title="Permalink"></a></h1><p>ClimaAtmos provides a set of common numerical configurations that can be used as building blocks for different types of simulations. These configurations are located in <code>config/common_configs/</code> and contain standardized settings for grid resolution, time stepping, and numerical schemes.</p><h2 id="Available-Common-Configurations"><a class="docs-heading-anchor" href="#Available-Common-Configurations">Available Common Configurations</a><a id="Available-Common-Configurations-1"></a><a class="docs-heading-anchor-permalink" href="#Available-Common-Configurations" title="Permalink"></a></h2><h3 id="Column-Configurations"><a class="docs-heading-anchor" href="#Column-Configurations">Column Configurations</a><a id="Column-Configurations-1"></a><a class="docs-heading-anchor-permalink" href="#Column-Configurations" title="Permalink"></a></h3><ul><li><strong><code>numerics_column_ze63.yml</code></strong>: Single column configuration with 63 vertical levels</li></ul><h3 id="Sphere-Configurations"><a class="docs-heading-anchor" href="#Sphere-Configurations">Sphere Configurations</a><a id="Sphere-Configurations-1"></a><a class="docs-heading-anchor-permalink" href="#Sphere-Configurations" title="Permalink"></a></h3><ul><li><p><strong><code>numerics_sphere_he6ze10.yml</code></strong>: Spherical configuration with 6 horizontal elements (550km), 10 vertical levels, 30km domain top, no sponge, explicit vertical diffusion</p></li><li><p><strong><code>numerics_sphere_he6ze31.yml</code></strong>: Spherical configuration with 6 horizontal elements (550km) , 31 vertical levels, 60km domain top, rayleigh and viscous sponges, implicit vertical diffusion</p></li><li><p><strong><code>numerics_sphere_he16ze63.yml</code></strong>: Spherical configuration with 16 horizontal elements (206km), 63 vertical levels, 60km domain top, rayleigh and viscous sponges, implicit vertical diffusion</p></li><li><p><strong><code>numerics_sphere_he30ze43.yml</code></strong>: Spherical configuration with 30 horizontal elements (110km), 43 vertical levels, 30km domain top, no sponge, explicit vertical diffusion</p></li><li><p><strong><code>numerics_sphere_he30ze63.yml</code></strong>: Spherical configuration with 30 horizontal elements (110km), 63 vertical levels, 60km domain top, rayleigh and viscous sponges, implicit vertical diffusion</p></li></ul><h2 id="Using-Common-Configurations"><a class="docs-heading-anchor" href="#Using-Common-Configurations">Using Common Configurations</a><a id="Using-Common-Configurations-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Common-Configurations" title="Permalink"></a></h2><p>Common configurations are designed to be used in combination with model-specific configurations. In the CI pipeline and when running simulations, you can specify multiple configuration files:</p><pre><code class="language-bash hljs">julia --project=.buildkite .buildkite/ci_driver.jl \
  --config_file config/common_configs/numerics_sphere_he16ze63.yml \
  --config_file config/model_configs/your_model_config.yml</code></pre><p>The common configuration provides the numerical setup (grid, time stepping, etc.), while the model configuration provides the physical setup (physics schemes, initial conditions, etc.). The model configuration will override any conflicting settings from the common configuration. Please modify them only if you are certain of the implications.</p><h1 id="Default-Configuration"><a class="docs-heading-anchor" href="#Default-Configuration">Default Configuration</a><a id="Default-Configuration-1"></a><a class="docs-heading-anchor-permalink" href="#Default-Configuration" title="Permalink"></a></h1></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Friday 29 August 2025 23:36">Friday 29 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
