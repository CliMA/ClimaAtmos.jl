<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Setups · ClimaAtmos.jl</title><meta name="title" content="Setups · ClimaAtmos.jl"/><meta property="og:title" content="Setups · ClimaAtmos.jl"/><meta property="twitter:title" content="Setups · ClimaAtmos.jl"/><meta name="description" content="Documentation for ClimaAtmos.jl."/><meta property="og:description" content="Documentation for ClimaAtmos.jl."/><meta property="twitter:description" content="Documentation for ClimaAtmos.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="ClimaAtmos.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">ClimaAtmos.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../getting_started/">Getting Started</a></li><li><a class="tocitem" href="../contributor_guide/">Contributor Guide</a></li><li><a class="tocitem" href="../equations/">Equations</a></li><li><a class="tocitem" href="../microphysics/">Microphysics</a></li><li><a class="tocitem" href="../edmf_equations/">EDMF Equations</a></li><li><a class="tocitem" href="../diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../grids/">Grids</a></li><li class="is-active"><a class="tocitem" href>Setups</a><ul class="internal"><li><a class="tocitem" href="#center_initial_condition"><span><code>center_initial_condition</code></span></a></li><li><a class="tocitem" href="#face_initial_condition"><span><code>face_initial_condition</code></span></a></li><li><a class="tocitem" href="#surface_condition"><span><code>surface_condition</code></span></a></li><li><a class="tocitem" href="#overwrite_initial_state!"><span><code>overwrite_initial_state!</code></span></a></li><li><a class="tocitem" href="#SCM-Forcing-Methods"><span>SCM Forcing Methods</span></a></li><li><a class="tocitem" href="#Helper-Functions"><span>Helper Functions</span></a></li><li><a class="tocitem" href="#Available-Setups"><span>Available Setups</span></a></li></ul></li><li><a class="tocitem" href="../available_diagnostics/">Available Diagnostics</a></li><li><a class="tocitem" href="../diagnostic_edmf_equations/">Diagnostic EDMF Equations</a></li><li><a class="tocitem" href="../gravity_wave/">Gravity Wave Drag Parameterizations</a></li><li><a class="tocitem" href="../surface_albedo/">Ocean Surface Albedo Parameterization</a></li><li><a class="tocitem" href="../topography/">Topography Representation</a></li><li><a class="tocitem" href="../tracers/">Tracers</a></li><li><a class="tocitem" href="../implicit_solver/">Implicit Solver</a></li><li><a class="tocitem" href="../radiative_equilibrium/">Radiative Equilibrium</a></li><li><a class="tocitem" href="../single_column_prospect/">Single Column Model</a></li><li><a class="tocitem" href="../restarts/">Restarts and checkpoints</a></li><li><a class="tocitem" href="../repl_scripts/">REPL scripts</a></li><li><a class="tocitem" href="../config/">Configuration</a></li><li><a class="tocitem" href="../parameters/">Parameters</a></li><li><a class="tocitem" href="../longruns/">Longruns</a></li><li><a class="tocitem" href="../itime/">The time type</a></li><li><a class="tocitem" href="../api/">API</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Setups</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Setups</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaAtmos.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaAtmos.jl/blob/main/docs/src/setups.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Setups"><a class="docs-heading-anchor" href="#Setups">Setups</a><a id="Setups-1"></a><a class="docs-heading-anchor-permalink" href="#Setups" title="Permalink"></a></h1><p>A setup defines the initial conditions for a simulation case. At its core, a setup is a struct that implements <code>center_initial_condition</code>, which returns a physical state NamedTuple at each grid point. The physical state describes the thermodynamic and kinematic state through temperature, pressure or density, moisture, velocity and is converted into prognostic variables automatically based on the model configuration.</p><h2 id="center_initial_condition"><a class="docs-heading-anchor" href="#center_initial_condition"><code>center_initial_condition</code></a><a id="center_initial_condition-1"></a><a class="docs-heading-anchor-permalink" href="#center_initial_condition" title="Permalink"></a></h2><p>Every setup must implement this method. It is called pointwise over the grid and returns a <a href="#ClimaAtmos.Setups.physical_state"><code>ClimaAtmos.Setups.physical_state</code></a> NamedTuple. Only <code>T</code> and one of <code>p</code> or <code>ρ</code> are required; all other fields default to zero.</p><p>For example, a minimal setup:</p><pre><code class="language-julia hljs">struct MySetup end

function Setups.center_initial_condition(::MySetup, local_geometry, params)
    z = local_geometry.coordinates.z
    FT = typeof(z)
    return physical_state(; T = FT(300), p = FT(101500))
end</code></pre><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.physical_state"><a class="docstring-binding" href="#ClimaAtmos.Setups.physical_state"><code>ClimaAtmos.Setups.physical_state</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">physical_state(; T, p=nothing, ρ=nothing, kwargs...)</code></pre><p>Construct a NamedTuple representing the physical state at a grid point. This is the return type of <code>center_initial_condition</code> — it describes the thermodynamic and kinematic state without any knowledge of the atmos model.</p><p>The assembly layer (<code>prognostic_variables.jl</code>) converts this into model-specific prognostic variables.</p><p><strong>Required arguments</strong></p><ul><li><code>T</code>: Temperature (K)</li><li>At least one of <code>p</code> (pressure, Pa) or <code>ρ</code> (density, kg/m³). If only one is provided, the assembly layer computes the other via <code>Thermodynamics</code>.</li></ul><p><strong>Optional arguments (default to zero)</strong></p><ul><li><code>u</code>, <code>v</code>: Zonal and meridional velocity (m/s)</li><li><code>q_tot</code>, <code>q_liq</code>, <code>q_ice</code>: Specific humidities</li><li><code>tke</code>: Turbulent kinetic energy (specific)</li><li><code>draft_area</code>: EDMF draft area fraction</li><li><code>q_rai</code>, <code>q_sno</code>: Precipitation specific humidities</li><li><code>n_liq</code>, <code>n_rai</code>: Number densities (2-moment microphysics)</li><li><code>n_ice</code>, <code>q_rim</code>, <code>b_rim</code>: P3 microphysics fields</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/common.jl#L12-L35">source</a></section></details></article><h2 id="face_initial_condition"><a class="docs-heading-anchor" href="#face_initial_condition"><code>face_initial_condition</code></a><a id="face_initial_condition-1"></a><a class="docs-heading-anchor-permalink" href="#face_initial_condition" title="Permalink"></a></h2><p>Returns face (vertical interface) state variables. Must include <code>w</code> (vertical velocity); may also include <code>w_draft</code> for EDMF updraft initialization. Defaults to zero vertical velocity.</p><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.face_initial_condition"><a class="docstring-binding" href="#ClimaAtmos.Setups.face_initial_condition"><code>ClimaAtmos.Setups.face_initial_condition</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">face_initial_condition(setup, local_geometry, params)</code></pre><p>Return a NamedTuple of face state variables. At minimum, must include:</p><ul><li><code>w</code>: Vertical velocity (m/s)</li></ul><p>Optionally:</p><ul><li><code>w_draft</code>: EDMF draft vertical velocity (m/s)</li></ul><p><strong>Default</strong></p><p>Returns <code>(; w = zero(eltype(params)))</code> (zero vertical velocity).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/Setups.jl#L44-L55">source</a></section></details></article><h2 id="surface_condition"><a class="docs-heading-anchor" href="#surface_condition"><code>surface_condition</code></a><a id="surface_condition-1"></a><a class="docs-heading-anchor-permalink" href="#surface_condition" title="Permalink"></a></h2><p>Returns a NamedTuple of surface boundary data (e.g., surface temperature <code>T</code> and roughness length <code>z0</code>). Used by the surface model construction layer to set surface boundary conditions. Not all setups need this — only those that prescribe case-specific surface properties.</p><h2 id="overwrite_initial_state!"><a class="docs-heading-anchor" href="#overwrite_initial_state!"><code>overwrite_initial_state!</code></a><a id="overwrite_initial_state!-1"></a><a class="docs-heading-anchor-permalink" href="#overwrite_initial_state!" title="Permalink"></a></h2><p>For file-based setups (e.g., ERA5, GCM-driven) that operate on the full prognostic state <code>Y</code> rather than pointwise. Called after the standard pointwise initialization and overwrites fields in-place with regridded file data. Defaults to a no-op.</p><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.overwrite_initial_state!"><a class="docstring-binding" href="#ClimaAtmos.Setups.overwrite_initial_state!"><code>ClimaAtmos.Setups.overwrite_initial_state!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">overwrite_initial_state!(setup, Y, thermo_params)</code></pre><p>Optionally overwrite the initial state <code>Y</code> after construction. Used by file-based setups that operate at the field level rather than pointwise.</p><p>Default: no-op.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/Setups.jl#L61-L68">source</a></section></details></article><h2 id="SCM-Forcing-Methods"><a class="docs-heading-anchor" href="#SCM-Forcing-Methods">SCM Forcing Methods</a><a id="SCM-Forcing-Methods-1"></a><a class="docs-heading-anchor-permalink" href="#SCM-Forcing-Methods" title="Permalink"></a></h2><p>Single-column setups can provide forcing profiles that replace the corresponding YAML config keys. When a method returns <code>nothing</code> (the default), the config key is used instead.</p><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.subsidence_forcing"><a class="docstring-binding" href="#ClimaAtmos.Setups.subsidence_forcing"><code>ClimaAtmos.Setups.subsidence_forcing</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">subsidence_forcing(setup, FT)</code></pre><p>Return a subsidence profile function <code>z -&gt; w_subsidence</code>, or <code>nothing</code>. When non-nothing, the returned profile is wrapped in a <code>Subsidence</code> struct by the model construction layer, replacing the <code>subsidence</code> config key.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/Setups.jl#L75-L81">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.large_scale_advection_forcing"><a class="docstring-binding" href="#ClimaAtmos.Setups.large_scale_advection_forcing"><code>ClimaAtmos.Setups.large_scale_advection_forcing</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">large_scale_advection_forcing(setup, FT)</code></pre><p>Return <code>(; prof_dTdt, prof_dqtdt)</code> as raw APL profile functions, or <code>nothing</code>. The model construction layer wraps these into a <code>LargeScaleAdvection</code> struct, replacing the <code>ls_adv</code> config key.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/Setups.jl#L84-L90">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.coriolis_forcing"><a class="docstring-binding" href="#ClimaAtmos.Setups.coriolis_forcing"><code>ClimaAtmos.Setups.coriolis_forcing</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">coriolis_forcing(setup, FT)</code></pre><p>Return <code>(; prof_ug, prof_vg, coriolis_param)</code>, or <code>nothing</code>. The model construction layer wraps these into a <code>SCMCoriolis</code> struct, replacing the <code>scm_coriolis</code> config key.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/Setups.jl#L93-L99">source</a></section></details></article><h2 id="Helper-Functions"><a class="docs-heading-anchor" href="#Helper-Functions">Helper Functions</a><a id="Helper-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Helper-Functions" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.total_specific_energy"><a class="docstring-binding" href="#ClimaAtmos.Setups.total_specific_energy"><code>ClimaAtmos.Setups.total_specific_energy</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">total_specific_energy(params, T, local_geometry; u=0, v=0, q_tot=0, q_liq=0, q_ice=0)</code></pre><p>Compute the specific total energy <code>e_tot = e_int + e_kin + e_pot</code> from temperature, geometry, and optional velocity/moisture fields.</p><p>This is the per-unit-mass total energy (multiply by <code>ρ</code> to get <code>ρe_tot</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/common.jl#L82-L89">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.get_density"><a class="docstring-binding" href="#ClimaAtmos.Setups.get_density"><code>ClimaAtmos.Setups.get_density</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">get_density(physical_state, params)</code></pre><p>Extract or compute air density from a <code>physical_state</code> NamedTuple.</p><p>If <code>physical_state.ρ</code> is provided, returns it directly. Otherwise computes density from <code>physical_state.p</code> via <code>Thermodynamics.air_density</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/common.jl#L111-L118">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.moist_static_energy"><a class="docstring-binding" href="#ClimaAtmos.Setups.moist_static_energy"><code>ClimaAtmos.Setups.moist_static_energy</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">moist_static_energy(params, T, local_geometry; q_tot=0, q_liq=0, q_ice=0)</code></pre><p>Compute the moist static energy <code>h = c_p T + g z + L_v q_tot</code> (enthalpy + geopotential).</p><p>Used for initializing EDMFX subdomain thermodynamic variables.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/common.jl#L126-L132">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.hydrostatic_pressure_profile"><a class="docstring-binding" href="#ClimaAtmos.Setups.hydrostatic_pressure_profile"><code>ClimaAtmos.Setups.hydrostatic_pressure_profile</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">hydrostatic_pressure_profile(; thermo_params, p_0, [T, θ, q_tot, z_max])</code></pre><p>Solves the initial value problem <code>p&#39;(z) = -g * ρ(z)</code> for all <code>z ∈ [0, z_max]</code>, given <code>p(0)</code>, either <code>T(z)</code> or <code>θ(z)</code>, and optionally also <code>q_tot(z)</code>. If <code>q_tot(z)</code> is not given, it is assumed to be 0. If <code>z_max</code> is not given, it is assumed to be 30 km. Note that <code>z_max</code> should be the maximum elevation to which the specified profiles T(z), θ(z), and/or q_tot(z) are valid.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/hydrostatic.jl#L69-L77">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.perturb_coeff"><a class="docstring-binding" href="#ClimaAtmos.Setups.perturb_coeff"><code>ClimaAtmos.Setups.perturb_coeff</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">perturb_coeff(point)</code></pre><p>Return a geometry-dependent perturbation coefficient for the given coordinate point. Used by setups that apply spatial perturbations to initial profiles.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/common.jl#L67-L72">source</a></section></details></article><h2 id="Available-Setups"><a class="docs-heading-anchor" href="#Available-Setups">Available Setups</a><a id="Available-Setups-1"></a><a class="docs-heading-anchor-permalink" href="#Available-Setups" title="Permalink"></a></h2><h3 id="SCM-Cases"><a class="docs-heading-anchor" href="#SCM-Cases">SCM Cases</a><a id="SCM-Cases-1"></a><a class="docs-heading-anchor-permalink" href="#SCM-Cases" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.Bomex"><a class="docstring-binding" href="#ClimaAtmos.Setups.Bomex"><code>ClimaAtmos.Setups.Bomex</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Bomex</code></pre><p>The Bomex setup described in [<a href="../references/#Holland1973">3</a>], with a hydrostatically balanced pressure profile. Profiles are sourced from AtmosphericProfilesLibrary.</p><p>The <code>profiles</code> field stores precomputed atmospheric profile functions (computed at construction time before broadcasting).</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">import Thermodynamics as TD
import ClimaParams as CP
FT = Float64
toml_dict = CP.create_toml_dict(FT)
thermo_params = TD.Parameters.ThermodynamicsParameters(toml_dict)
setup = Bomex(; prognostic_tke = true, thermo_params)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/Bomex.jl#L1-L19">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.Rico"><a class="docstring-binding" href="#ClimaAtmos.Setups.Rico"><code>ClimaAtmos.Setups.Rico</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Rico</code></pre><p>The RICO (Rain In Cumulus over the Ocean) setup described in [<a href="../references/#Rauber2007">4</a>], with a hydrostatically balanced pressure profile. Profiles are sourced from AtmosphericProfilesLibrary.</p><p>The <code>profiles</code> field stores precomputed atmospheric profile functions (computed at construction time before broadcasting).</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">import Thermodynamics as TD
import ClimaParams as CP
FT = Float64
toml_dict = CP.create_toml_dict(FT)
thermo_params = TD.Parameters.ThermodynamicsParameters(toml_dict)
setup = Rico(; prognostic_tke = true, thermo_params)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/Rico.jl#L1-L19">source</a></section></details></article><h3 id="Data-Driven"><a class="docs-heading-anchor" href="#Data-Driven">Data-Driven</a><a id="Data-Driven-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Driven" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.GCMDriven"><a class="docstring-binding" href="#ClimaAtmos.Setups.GCMDriven"><code>ClimaAtmos.Setups.GCMDriven</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">GCMDriven{P, FT}</code></pre><p>Pointwise column IC driven by GCM forcing NetCDF data.</p><p><strong>Fields</strong></p><ul><li><code>external_forcing_file</code>: Path to the GCM forcing NetCDF file.</li><li><code>cfsite_number</code>: Site identifier within the NetCDF file (e.g., <code>&quot;site23&quot;</code>).</li><li><code>profiles</code>: NamedTuple of 1D interpolators <code>(T, u, v, q_tot, ρ)</code>.</li><li><code>T_sfc</code>: Mean surface temperature from the forcing file.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">setup = GCMDriven(&quot;path/to/HadGEM2-A_amip.2004-2008.07.nc&quot;, &quot;site23&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/GCMDriven.jl#L11-L26">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.InterpolatedColumnProfile"><a class="docstring-binding" href="#ClimaAtmos.Setups.InterpolatedColumnProfile"><code>ClimaAtmos.Setups.InterpolatedColumnProfile</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">InterpolatedColumnProfile{F}</code></pre><p>Reads vertical profiles from a time-varying external forcing NetCDF file at a specific time index and builds 1D interpolators. The <code>center_initial_condition</code> evaluates these profiles at each grid height.</p><p>This setup is used for single-column simulations initialized from ERA5 reanalysis data with time-varying external forcing (e.g., &quot;ReanalysisTimeVarying&quot;).</p><p><strong>Fields</strong></p><ul><li><code>T</code>: Temperature interpolator function <code>z -&gt; T(z)</code></li><li><code>u</code>: Zonal wind velocity interpolator function <code>z -&gt; u(z)</code></li><li><code>v</code>: Meridional wind velocity interpolator function <code>z -&gt; v(z)</code></li><li><code>q_tot</code>: Total specific humidity interpolator function <code>z -&gt; q_tot(z)</code></li><li><code>ρ</code>: Air density interpolator function <code>z -&gt; ρ(z)</code></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">setup = interpolated_column_profile(&quot;path/to/era5_forcing.nc&quot;, &quot;20070701&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/InterpolatedColumnProfile.jl#L1-L22">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.MoistFromFile"><a class="docstring-binding" href="#ClimaAtmos.Setups.MoistFromFile"><code>ClimaAtmos.Setups.MoistFromFile</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MoistFromFile(file_path)</code></pre><p>File-based initial condition that reads thermodynamic and kinematic state from a NetCDF file and regrids it onto the model grid.</p><p>Assigns NaN placeholders during pointwise construction, then overwrites the full prognostic state with data regridded from the given file via <code>overwrite_from_file!</code>.</p><p><strong>Fields</strong></p><ul><li><code>file_path</code>: Path to the NetCDF file containing initial condition data.</li></ul><p><strong>Expected variables in the file</strong></p><ul><li><code>p</code>: pressure (2D surface, broadcast in z)</li><li><code>t</code>: temperature (3D)</li><li><code>q</code>: specific humidity (3D)</li><li><code>u, v, w</code>: velocity (3D)</li><li><code>cswc, crwc</code>: snow and rain water content (optional)</li><li><code>z_sfc</code>: surface altitude (optional, for topographic pressure correction)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/MoistFromFile.jl#L1-L21">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.WeatherModel"><a class="docstring-binding" href="#ClimaAtmos.Setups.WeatherModel"><code>ClimaAtmos.Setups.WeatherModel</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">WeatherModel</code></pre><p>ERA5-derived initial condition for weather/forecast simulations.</p><p>Assigns NaN placeholders during pointwise construction, then overwrites the full prognostic state with ERA5 data obtained via <code>weather_model_data_path</code>.</p><p><strong>Fields</strong></p><ul><li><code>start_date</code>: Date string in format &quot;yyyymmdd&quot; or &quot;yyyymmdd-HHMM&quot;.</li><li><code>era5_initial_condition_dir</code>: Optional directory with pre-processed ERA5 files. When <code>nothing</code>, uses the <code>weather_model_ic</code> ClimaArtifact.</li><li><code>use_full_pressure</code>: If <code>true</code>, attempt to read 3D pressure from the file rather than computing it hydrostatically. Defaults to <code>false</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/WeatherModel.jl#L1-L15">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.Setups.AMIPFromERA5"><a class="docstring-binding" href="#ClimaAtmos.Setups.AMIPFromERA5"><code>ClimaAtmos.Setups.AMIPFromERA5</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">AMIPFromERA5(start_date)</code></pre><p>AMIP initial condition using ERA5 monthly reanalysis data.</p><p>Assigns NaN placeholders during pointwise construction, then overwrites the full prognostic state with ERA5 data from the <code>era5_inst_model_levels</code> ClimaArtifact, delegating to <code>overwrite_from_file!</code>.</p><p><strong>Fields</strong></p><ul><li><code>start_date</code>: Date string in format &quot;yyyymmdd&quot; or &quot;yyyymmdd-HHMM&quot;.</li></ul><p><strong>Expected artifact structure</strong></p><p><code>era5_inst_model_levels/era5_init_processed_internal_YYYYMMDD_0000.nc</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/22a9aaf3be6f0d28d25a6eb41853b87ae248f116/src/setups/AMIPFromERA5.jl#L1-L15">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../grids/">« Grids</a><a class="docs-footer-nextpage" href="../available_diagnostics/">Available Diagnostics »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Tuesday 17 February 2026 23:04">Tuesday 17 February 2026</span>. Using Julia version 1.11.9.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
