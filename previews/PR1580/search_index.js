var documenterSearchIndex = {"docs":
[{"location":"references/#References","page":"References","title":"References","text":"","category":"section"},{"location":"references/","page":"References","title":"References","text":"","category":"page"},{"location":"api/#API","page":"API","title":"API","text":"","category":"section"},{"location":"api/","page":"API","title":"API","text":"ClimaAtmos.TurbulenceConvection.Parameters","category":"page"},{"location":"api/#ClimaAtmos.TurbulenceConvection.Parameters","page":"API","title":"ClimaAtmos.TurbulenceConvection.Parameters","text":"Parameters\n\n\n\n\n\n","category":"module"},{"location":"edmf_equations/#Sub-grid-scale-equations","page":"EDMF Equations","title":"Sub-grid scale equations","text":"","category":"section"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"This describes the EDMF scheme equations and its discretizations. Where possible, we use a coordinate invariant form: the ClimaCore operators generally handle the conversions between bases internally.","category":"page"},{"location":"edmf_equations/#Dycore-variables","page":"EDMF Equations","title":"Dycore variables","text":"","category":"section"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"boldsymbolOmega is the planetary angular velocity. We currently use a shallow-atmosphere approximation, with\nboldsymbolOmega = Omega sin(phi) boldsymbole^v\nwhere phi is latitude, and Omega is the planetary rotation rate in rads/sec (for Earth, 729212 times 10^-5 s^-1) and boldsymbole^v is the unit radial basis vector. This implies that the horizontal contravariant component boldsymbolOmega^h is zero.\nboldsymbolu_h = u_1 boldsymbole^1 + u_2 boldsymbole^2 is the projection onto horizontal covariant components (covariance here means with respect to the reference element), stored at cell centers.\nPhi = g z is the geopotential, where g is the gravitational acceleration rate and z is altitude above the mean sea level.\nrho_textref is the reference state density\np is air pressure, derived from the thermodynamic state, reconstructed at cell centers.\np_textref is the reference state pressure. It is related to the reference state density by analytical hydrostatic balance: nabla p_textref = - rho_textref nabla Phi.","category":"page"},{"location":"edmf_equations/#Prognostic-variables","page":"EDMF Equations","title":"Prognostic variables","text":"","category":"section"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"hatrho^j: effective density in kg/m³. Superscript j represents the sub-domain. hatrho^j = rho^j a^j where rho^j is the sub-domain density and a^j is the sub-domain area fraction. This is discretized at cell centers.\nboldsymbolu^j velocity, a vector in m/s. This is discretized via boldsymbolu^j = boldsymbolu_h + boldsymbolu_v^j where\nboldsymbolu_v^j = u_3^j boldsymbole^3 is the projection onto the vertical covariant components, stored at cell faces.\nhatrho^j e^j: total energy in J/m³. This is discretized at cell centers.\nhatrho^j q^j: moisture tracers. q^j stands for the sub-domain total (liquid, ice, rain, snow) specific humidity in kg/kg. This is stored at cell centers.\nhatrho^j chi^j: other tracers (aerosol, ...), again stored at cell centers.","category":"page"},{"location":"edmf_equations/#Operators","page":"EDMF Equations","title":"Operators","text":"","category":"section"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"We make use of the following operators","category":"page"},{"location":"edmf_equations/#Reconstruction","page":"EDMF Equations","title":"Reconstruction","text":"","category":"section"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"I^c is the face-to-center reconstruction operator (arithmetic mean)\nI^f is the center-to-face reconstruction operator (arithmetic mean)\nWI^f is the center-to-face weighted reconstruction operator\nWI^f(J x) = I^f(J*x)  I^f(J), where J is the value of the Jacobian for use in the weighted interpolation operator\nU^f is the 1st or 3rd-order center-to-face upwind product operator # fix link","category":"page"},{"location":"edmf_equations/#Differential-operators","page":"EDMF Equations","title":"Differential operators","text":"","category":"section"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"D_h is the discrete horizontal spectral divergence.\nhatmathcalD_h is the discrete horizontal spectral weak divergence.\nD^c_v is the face-to-center vertical divergence.\nG_h is the discrete horizontal spectral gradient.\nG^f_v is the center-to-face vertical gradient.\nthe gradient is set to 0 at the top and bottom boundaries.\nC_h is the curl components involving horizontal derivatives\nC_hboldsymbolu_h returns a vector with only vertical contravariant components.\nC_hboldsymbolu_v returns a vector with only horizontal contravariant components.\nhatmathcalC_h is the weak curl components involving horizontal derivatives\nC^f_v is the center-to-face curl involving vertical derivatives.\nC^f_vboldsymbolu_h returns a vector with only a horizontal contravariant component.\nthe curl is set to 0 at the top and bottom boundaries.\nWe need to clarify how best to handle this.","category":"page"},{"location":"edmf_equations/#Projection","page":"EDMF Equations","title":"Projection","text":"","category":"section"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"mathcalP is the direct stiffness summation (DSS) operation, which computes the projection onto the continuous spectral element basis.","category":"page"},{"location":"edmf_equations/#Auxiliary-and-derived-quantities","page":"EDMF Equations","title":"Auxiliary and derived quantities","text":"","category":"section"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"tildeboldsymbolu^j is the mass-weighted reconstruction of velocity at the interfaces: by interpolation of contravariant components\ntildeboldsymbolu^j = WI^f(rho^j J boldsymbolu_h) + boldsymbolu_v^j","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"Technically, from mass conservation, the weighting factor should be hatrho^j J. However, in order to avoid issues coming from close to zero sub-domain area fractions, we can instead use rho^j J or even rho J.","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"barboldsymbolu^j is the reconstruction of velocity at cell-centers, carried out by linear interpolation of the covariant vertical component:\nbarboldsymbolu^j = boldsymbolu_h + I_c(boldsymbolu_v^j)\nboldsymbolb^j is the reduced gravitational acceleration\nboldsymbolb^j = - fracrho^j - rho_textrefrho^j nabla Phi\nK^j = tfrac12 boldsymbolu^j^2 is the specific kinetic energy (J/kg), reconstructed at cell centers by\nK^j = tfrac12 (boldsymbolu_h^j cdot boldsymbolu_h^j + 2 boldsymbolu_h^j cdot I_c (boldsymbolu_v^j) + I_c(boldsymbolu_v^j cdot boldsymbolu_v^j))\nwhere boldsymbolu_h^j is defined on cell-centers, boldsymbolu_v^j is defined on cell-faces, and I_c (boldsymbolu_v) is interpolated using covariant components.\nnu_u, nu_h, and nu_chi are hyperdiffusion coefficients, and c is the divergence damping factor.\nNo-flux boundary conditions are enforced by requiring the third contravariant component of the face-valued velocity at the boundary, boldsymboltildeu^vj, to be zero. The vertical covariant velocity component is computed as\ntildeu_v^j = - tfracu_1g^31 + u_2g^32g^33","category":"page"},{"location":"edmf_equations/#Equations-and-discretizations","page":"EDMF Equations","title":"Equations and discretizations","text":"","category":"section"},{"location":"edmf_equations/#Mass","page":"EDMF Equations","title":"Mass","text":"","category":"section"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"Follows the continuity equation","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"fracpartialpartial t hatrho^j = - nabla cdot (hatrho^j boldsymbolu^j)  + RHS","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"This is discretized using the following","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"fracpartialpartial t hatrho^j\n= - D_h hatrho^j (boldsymbolu_h + I^c(boldsymbolu_v^j)) - D^c_v leftWI^f( J hatrho^j) tildeboldsymbolu^j right + RHS","category":"page"},{"location":"edmf_equations/#Momentum","page":"EDMF Equations","title":"Momentum","text":"","category":"section"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"Uses the advective form equation","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"fracpartialpartial t boldsymbolu^j  = - (2 boldsymbolOmega + nabla times boldsymbolu^j) times boldsymbolu^j - frac1rho^j nabla (p - p_textref)  + boldsymbolb^j - nabla K^j + RHS","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"By breaking the curl and cross product terms into horizontal and vertical contributions, and removing zero terms (e.g. nabla_v  times boldsymbolu_v = 0), we obtain the vertical momentum equation. The horizontal momentum equation is only solved in the grid-mean.","category":"page"},{"location":"edmf_equations/#Vertical-momentum","page":"EDMF Equations","title":"Vertical momentum","text":"","category":"section"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"Similarly for vertical velocity","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"fracpartialpartial t boldsymbolu_v^j  =\n  - (nabla_v times boldsymbolu_h + nabla_h times boldsymbolu_v^j) times boldsymbolu^h\n  - frac1rho^j nabla_v (p - p_textref) - fracrho^j - rho_textrefrho^j nabla_v Phi - nabla_v K^j + RHS ","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"The (nabla_v times boldsymbolu_h + nabla_h times boldsymbolu_v^j) times boldsymbolu^h term is discretized as","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"(C^f_vboldsymbolu_h + C_hboldsymbolu_v^j) times I^f(boldsymbolu^h) ","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"and the -frac1rho^j nabla_v (p - p_textref) - fracrho^j - rho_textrefrho^j nabla_v Phi - nabla_v K^j term as","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"-frac1I^f(rho^j) G^f_vp - p_textref - fracI^f(rho^j - rho_textref)I^f(rho^j) G^f_vPhi - G^f_vK^j ","category":"page"},{"location":"edmf_equations/#Total-energy","page":"EDMF Equations","title":"Total energy","text":"","category":"section"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"fracpartialpartial t hatrho^j e^j = - nabla cdot((hatrho^j e^j + frachatrho^jrho^jp) boldsymbolu^j) - p fracpartialpartial t frachatrho^jrho^j + RHS","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"which is stabilized with the addition of a 4th-order hyperdiffusion term on total enthalpy:","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"- nu_h nabla cdot left( hatrho^j nabla^3 left(fracrho^j e^j + prho^j right)right)","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"is discretized using","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"fracpartialpartial t hatrho^j e^j approx\n- D_h (hatrho^j e^j + frachatrho^jrho^jp) (boldsymbolu_h + I^c(boldsymbolu_v^j))\n- D^c_v left WI^f(Jhatrho^j)   tildeboldsymbolu^j  I^f left(frachatrho^j e^j + frachatrho^jrho^jphatrho^j right)\n  right - nu_h hatmathcalD_h( rho mathcalG_h(psi^j) ) + RHS ","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"where","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"psi^j = mathcalP left hatmathcalD_h left( mathcalG_h left(fracrho^j e^j + prho^j right)right) right","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"todo: Todo\nNeed to change this to first order upwinding.","category":"page"},{"location":"edmf_equations/#Moisture-tracers","page":"EDMF Equations","title":"Moisture tracers","text":"","category":"section"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"For a sub-domain moisture scalar q^j, the density-weighted scalar hatrho^j q^j obeys the conservation law","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"fracpartialpartial t hatrho^j q^j = - nabla cdot(hatrho^j q^j (boldsymbolu^j - w_q^j hatboldsymbolk)) + RHS ","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"where hatboldsymbolk is the vertical unit vector and w_q^j is the terminal velocity.","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"This is stabilized with the addition of a 4th-order hyperdiffusion term","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"- nu_q nabla cdot(hatrho^j nabla^3(q^j))","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"This is discretized using the following","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"fracpartialpartial t hatrho^j q^j approx\n- D_h hatrho^j q^j (boldsymbolu_h + I^c(boldsymbolu_v^j))\n- D^c_v left WI^f(Jhatrho^j)  U^fleft( tildeboldsymbolu^j  frachatrho^j q^jhatrho^j right) right\n- nu_chi hatmathcalD_h ( hatrho^j  mathcalG_h (psi^j) ) + sedimentation + RHS","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"where","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"psi^j = mathcalP left hatmathcalD_h left( mathcalG_h left( frachatrho^j q^jhatrho^j right)right) right","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"Currently we use the central reconstruction","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"- D^c_v left WI^f(Jhatrho^j)  tildeboldsymbolu^j  I^fleft( frachatrho^j q^jhatrho^j right) right","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"todo: Todo\nNeed to change this to first order upwinding.","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"todo: Todo\nWrite down the discretization for sedimentation. Assume the sedimentation velocity is zero for now.","category":"page"},{"location":"edmf_equations/#Other-tracers","page":"EDMF Equations","title":"Other tracers","text":"","category":"section"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"For a sub-domain scalar chi^j, the density-weighted scalar hatrho^j chi^j follows the continuity equation","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"fracpartialpartial t hatrho^j chi^j = - nabla cdot(hatrho^j chi^j boldsymbolu^j) + RHS ","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"This is stabilized with the addition of a 4th-order hyperdiffusion term","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"- nu_chi nabla cdot(hatrho^j nabla^3(chi^j))","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"This is discretized using the following","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"fracpartialpartial t hatrho^j chi^j approx\n- D_h hatrho^j chi^j (boldsymbolu_h + I^c(boldsymbolu_v^j))\n- D^c_v left WI^f(Jhatrho^j)  U^fleft( tildeboldsymbolu^j  frachatrho^j chi^jhatrho^j right) right\n- nu_chi hatmathcalD_h ( hatrho^j  mathcalG_h (psi^j) ) + RHS","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"where","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"psi^j = mathcalP left hatmathcalD_h left( mathcalG_h left( frachatrho^j chi^jhatrho^j right)right) right","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"Currently we use the central reconstruction","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"- D^c_v left WI^f(Jhatrho^j)  tildeboldsymbolu^j  I^fleft( frachatrho^j chi^jhatrho^j right) right","category":"page"},{"location":"edmf_equations/","page":"EDMF Equations","title":"EDMF Equations","text":"todo: Todo\nNeed to change this to first order upwinding.","category":"page"},{"location":"equations/#Equations","page":"Equations","title":"Equations","text":"","category":"section"},{"location":"equations/","page":"Equations","title":"Equations","text":"note: Note\nThis follows what is currently implemented in examples: it should be kept up-to-date as code is modified. If you think something should be changed (but hasn't been), please add a note.","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"This describes the ClimaAtmos model equations and its discretizations. Where possible, we use a coordinate invariant form: the ClimaCore operators generally handle the conversions between bases internally.","category":"page"},{"location":"equations/#Prognostic-variables","page":"Equations","title":"Prognostic variables","text":"","category":"section"},{"location":"equations/","page":"Equations","title":"Equations","text":"rho: density in kg/m³. This is discretized at cell centers.\nboldsymbolu velocity, a vector in m/s. This is discretized via boldsymbolu = boldsymbolu_h + boldsymbolu_v where\nboldsymbolu_h = u_1 boldsymbole^1 + u_2 boldsymbole^2 is the projection onto horizontal covariant components (covariance here means with respect to the reference element), stored at cell centers.\nboldsymbolu_v = u_3 boldsymbole^3 is the projection onto the vertical covariant components, stored at cell faces.\nenergy, stored at cell centers; can be either:\nrho e: total energy in J/m³\nrho e_textint: internal energy in J/m³\nrho chi: other conserved scalars (moisture, tracers, etc), again stored at cell centers.","category":"page"},{"location":"equations/#Operators","page":"Equations","title":"Operators","text":"","category":"section"},{"location":"equations/","page":"Equations","title":"Equations","text":"We make use of the following operators","category":"page"},{"location":"equations/#Reconstruction","page":"Equations","title":"Reconstruction","text":"","category":"section"},{"location":"equations/","page":"Equations","title":"Equations","text":"I^c is the face-to-center reconstruction operator (arithmetic mean)\nI^f is the center-to-face reconstruction operator (arithmetic mean)\nWI^f is the center-to-face weighted reconstruction operator\nWI^f(J x) = I^f(J*x)  I^f(J), where J is the value of the Jacobian for use in the weighted interpolation operator\nU^f is the 1st or 3rd-order center-to-face upwind product operator # fix link","category":"page"},{"location":"equations/#Differential-operators","page":"Equations","title":"Differential operators","text":"","category":"section"},{"location":"equations/","page":"Equations","title":"Equations","text":"mathcalD_h is the discrete horizontal spectral divergence.\nhatmathcalD_h is the discrete horizontal spectral weak divergence.\nmathcalD^c_v is the face-to-center vertical divergence.","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"todo: Todo\nAdd vertical diffusive tendencies (including surface fluxes)","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"mathcalG_h is the discrete horizontal spectral gradient.\nmathcalG^f_v is the center-to-face vertical gradient.\nthe gradient is set to 0 at the top and bottom boundaries.\nmathcalC_h is the curl components involving horizontal derivatives\nmathcalC_hboldsymbolu_h returns a vector with only vertical contravariant components.\nmathcalC_hboldsymbolu_v returns a vector with only horizontal contravariant components.\nhatmathcalC_h is the weak curl components involving horizontal derivatives\nmathcalC^f_v is the center-to-face curl involving vertical derivatives.\nmathcalC^f_vboldsymbolu_h returns a vector with only a horizontal contravariant component.\nthe curl is set to 0 at the top and bottom boundaries.\nWe need to clarify how best to handle this.","category":"page"},{"location":"equations/#Projection","page":"Equations","title":"Projection","text":"","category":"section"},{"location":"equations/","page":"Equations","title":"Equations","text":"mathcalP is the direct stiffness summation (DSS) operation, which computes the projection onto the continuous spectral element basis.","category":"page"},{"location":"equations/#Auxiliary-and-derived-quantities","page":"Equations","title":"Auxiliary and derived quantities","text":"","category":"section"},{"location":"equations/","page":"Equations","title":"Equations","text":"boldsymbolOmega is the planetary angular velocity. We currently use a shallow-atmosphere approximation, with\nboldsymbolOmega = Omega sin(phi) boldsymbole^v\nwhere phi is latitude, and Omega is the planetary rotation rate in rads/sec (for Earth, 729212 times 10^-5 s^-1) and boldsymbole^v is the unit radial basis vector. This implies that the horizontal contravariant component boldsymbolOmega^h is zero.\ntildeboldsymbolu is the mass-weighted reconstruction of velocity at the interfaces: by interpolation of contravariant components\ntildeboldsymbolu = WI^f(rho J boldsymbolu_h) + boldsymbolu_v\nbarboldsymbolu is the reconstruction of velocity at cell-centers, carried out by linear interpolation of the covariant vertical component:\nbarboldsymbolu = boldsymbolu_h + I_c(boldsymbolu_v)\nPhi = g z is the geopotential, where g is the gravitational acceleration rate and z is altitude above the mean sea level.\nboldsymbolb is the reduced gravitational acceleration\nboldsymbolb = - fracrho - rho_textrefrho nabla Phi\nrho_textref is the reference state density\nK = tfrac12 boldsymbolu^2 is the specific kinetic energy (J/kg), reconstructed at cell centers by\nK = tfrac12 (boldsymbolu_h cdot boldsymbolu_h + 2 boldsymbolu_h cdot I_c (boldsymbolu_v) + I_c(boldsymbolu_v cdot boldsymbolu_v))\nwhere boldsymbolu_h is defined on cell-centers, boldsymbolu_v is defined on cell-faces, and I_c (boldsymbolu_v) is interpolated using covariant components.\np is air pressure, derived from the thermodynamic state, reconstructed at cell centers.\np_textref is the reference state pressure. It is related to the reference state density by analytical hydrostatic balance: nabla p_textref = - rho_textref nabla Phi.\nboldsymbolF_R are the radiative fluxes: these are assumed to align vertically (i.e. the horizontal contravariant components are zero), and are constructed at cell faces from RRTMGP.jl.\nnu_u, nu_h, and nu_chi are hyperdiffusion coefficients, and c is the divergence damping factor.\nNo-flux boundary conditions are enforced by requiring the third contravariant component of the face-valued velocity at the boundary, boldsymboltildeu^v, to be zero. The vertical covariant velocity component is computed as\ntildeu_v = tfrac-(u_1g^31 + u_2g^32)g^33","category":"page"},{"location":"equations/#Equations-and-discretizations","page":"Equations","title":"Equations and discretizations","text":"","category":"section"},{"location":"equations/#Mass","page":"Equations","title":"Mass","text":"","category":"section"},{"location":"equations/","page":"Equations","title":"Equations","text":"Follows the continuity equation","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"fracpartialpartial t rho = - nabla cdot(rho boldsymbolu) ","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"This is discretized using the following","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"fracpartialpartial t rho\n= - mathcalD_h rho barboldsymbolu - mathcalD^c_v leftWI^f( J rho) tildeboldsymbolu right","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"with the","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"-mathcalD^c_vWI^f(J rho) boldsymbolu_v","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"term treated implicitly (check this)","category":"page"},{"location":"equations/#Momentum","page":"Equations","title":"Momentum","text":"","category":"section"},{"location":"equations/","page":"Equations","title":"Equations","text":"Uses the advective form equation","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"fracpartialpartial t boldsymbolu  = - (2 boldsymbolOmega + nabla times boldsymbolu) times boldsymbolu - frac1rho nabla (p - p_textref)  + boldsymbolb - nabla K","category":"page"},{"location":"equations/#Horizontal-momentum","page":"Equations","title":"Horizontal momentum","text":"","category":"section"},{"location":"equations/","page":"Equations","title":"Equations","text":"By breaking the curl and cross product terms into horizontal and vertical contributions, and removing zero terms (e.g. nabla_v  times boldsymbolu_v = 0), we obtain","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"fracpartialpartial t boldsymbolu_h  =\n  - (nabla_v times boldsymbolu_h +  nabla_h times boldsymbolu_v) times boldsymbolu^v\n  - (2 boldsymbolOmega^v + nabla_h times boldsymbolu_h) times boldsymbolu^h\n  - frac1rho nabla_h (p - p_textref)  - nabla_h (Phi + K)","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"where boldsymbolu^h and boldsymbolu^v are the horizontal and vertical contravariant vectors. The effect of topography is accounted for through the computation of the contravariant velocity components (projections from the covariant velocity representation) prior to computing the cross-product contributions.","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"This is stabilized with the addition of 4th-order hyperviscosity","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"-nu_u  nabla^2 (nabla^2(boldsymbolu_h))","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"where nabla^2(boldsymbolv) is the vector Laplacian","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"nabla^2(boldsymbolv) = nabla(nabla cdot boldsymbolv) - nabla times (nabla times boldsymbolv)","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"The (nabla_v times boldsymbolu_h + nabla_h times boldsymbolu_v) times boldsymbolu^v term is discretized as:","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"fracI^c((mathcalC^f_vboldsymbolu_h + mathcalC_hboldsymbolu_v) times (I^f(rho J)tildeboldsymbolu^v))rho J","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"where","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"omega^h = (nabla_v times boldsymbolu_h + nabla_h times boldsymbolu_v)","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"The (2 boldsymbolOmega^v + nabla_h times boldsymbolu_h) times boldsymbolu^h term is discretized as","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"(2 boldsymbolOmega^v + mathcalC_hboldsymbolu_h) times boldsymbolu^h","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"and the frac1rho nabla_h (p - p_h)  + nabla_h (Phi + K) as","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"frac1rho mathcalG_hp - p_textref + mathcalG_hPhi + K ","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"where all these terms are treated explicitly.","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"The hyperviscosity term is","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"- nu_u left c  hatmathcalG_h ( mathcalD(boldsymbolpsi_h) ) - hatmathcalC_h( mathcalC_h( boldsymbolpsi_h )) right","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"where","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"boldsymbolpsi_h = mathcalP left hatmathcalG_h ( mathcalD(boldsymbolu_h) ) - hatmathcalC_h( mathcalC_h( boldsymbolu_h )) right","category":"page"},{"location":"equations/#Vertical-momentum","page":"Equations","title":"Vertical momentum","text":"","category":"section"},{"location":"equations/","page":"Equations","title":"Equations","text":"Similarly for vertical velocity","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"fracpartialpartial t boldsymbolu_v  =\n  - (nabla_v times boldsymbolu_h + nabla_h times boldsymbolu_v) times boldsymbolu^h\n  - frac1rho nabla_v (p - p_textref) - fracrho - rho_textrefrho nabla_v Phi - nabla_v K ","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"The (nabla_v times boldsymbolu_h + nabla_h times boldsymbolu_v) times boldsymbolu^h term is discretized as","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"(mathcalC^f_vboldsymbolu_h + mathcalC_hboldsymbolu_v) times I^f(boldsymbolu^h) ","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"and the frac1rho nabla_v (p - p_textref) - fracrho - rho_textrefrho nabla_v Phi - nabla_v K term as","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"frac1I^f(rho) mathcalG^f_vp - p_textref - fracI^f(rho - rho_textref)I^f(rho) mathcalG^f_vPhi - mathcalG^f_vK ","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"with the latter treated implicitly.","category":"page"},{"location":"equations/#Total-energy","page":"Equations","title":"Total energy","text":"","category":"section"},{"location":"equations/","page":"Equations","title":"Equations","text":"fracpartialpartial t rho e = - nabla cdot((rho e + p) boldsymbolu + boldsymbolF_R)","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"which is stabilized with the addition of a 4th-order hyperdiffusion term on total enthalpy:","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"- nu_h nabla cdot left( rho nabla^3 left(fracρe + pρ right)right)","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"This is discretized using","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"fracpartialpartial t rho e approx\n- mathcalD_h (rho e + p) barboldsymbolu \n- mathcalD^c_v left WI^f(Jrho)   tildeboldsymbolu  I^f left(fracrho e + prho right)\n  + boldsymbolF_R right - nu_h hatmathcalD_h( rho mathcalG_h(psi) )","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"where","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"psi = mathcalP left hatmathcalD_h left( mathcalG_h left(fracρe + pρ right)right) right","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"Currently the central reconstruction","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"- mathcalD^c_v left WI^f(Jrho)   tildeboldsymbolu  I^f left(fracrho e + prho right) right","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"is treated implicitly.","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"todo: Todo\nThe Jacobian computation should be updated so that the upwinded term- mathcalD^c_vleftWI^f(J rho) U^fleft(boldsymbolu_v fracrho e + prho right)rightis treated implicitly.","category":"page"},{"location":"equations/#Scalars","page":"Equations","title":"Scalars","text":"","category":"section"},{"location":"equations/","page":"Equations","title":"Equations","text":"For an arbitrary scalar chi, the density-weighted scalar rhochi follows the continuity equation","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"fracpartialpartial t rho chi = - nabla cdot(rho chi boldsymbolu)","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"This is stabilized with the addition of a 4th-order hyperdiffusion term","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"- nu_chi nabla cdot(rho nabla^3(chi))","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"This is discretized using","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"fracpartialpartial t rho chi approx\n- mathcalD_h rho chi barboldsymbolu\n- mathcalD^c_v left WI^f(Jrho)  U^fleft( tildeboldsymbolu  fracrho chirho right) right\n- nu_chi hatmathcalD_h ( rho  mathcalG_h (psi) )","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"where","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"psi = mathcalP left hatmathcalD_h left( mathcalG_h left( fracrho chirho right)right) right","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"Currently the central reconstruction","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"- mathcalD^c_v left WI^f(Jrho)  tildeboldsymbolu  I^fleft( fracrho chirho right) right","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"is treated implicitly.","category":"page"},{"location":"equations/","page":"Equations","title":"Equations","text":"todo: Todo\nThe Jacobian computation should be updated so that the upwinded term- mathcalD^c_vleftWI^f(J rho) U^fleft(I^f(boldsymbolu_h) + boldsymbolu_v fracrho chirho right) rightis treated implicitly.","category":"page"},{"location":"gravity_wave/#Gravity-wave-parameterization","page":"Gravity wave","title":"Gravity wave parameterization","text":"","category":"section"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"Gravity waves have a great impact on the atmospheric circulation. They are usually generated from topography or convection, propagate upward and alter temperature and winds in the middle atmosphere, and influence tropospheric circulation through downward control. The horizontal wavelength for gravity waves ranges from several kilometers to hundreds of kilometers, which is smaller than typical GCM resolution and needs to be parameterized.","category":"page"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"The gravity wave drag on the wind velocities (overlinevecv=(uv)) are ","category":"page"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"fracpartial overlinevecv partial t =  - underbracefracpartial overlinevecvwpartial zBig_GW _vecX ","category":"page"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"with vecX = (X_lambda X_phi) representing the subgrid scale zonal and meridional components of the gravity wave drag and is calculated with the parameterization. ","category":"page"},{"location":"gravity_wave/#Non-orographic-gravity-wave","page":"Gravity wave","title":"Non-orographic gravity wave","text":"","category":"section"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"The non-orographic gravity wave drag parameterization follows the spectra methods described in Joan M Alexander, Timothy J Dunkerton (1999). The following assumptions are made for this parameterization to work:","category":"page"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"The wave spectrum consists of independent monochromatic waves, and wave-wave interaction is neglected when propagation and instability is computed.\nThe gravity wave propagates vertically and conservatively to the breaking level and deposits all momentum flux into that level, as opposed to the method using saturation profile described in Richard S Lindzen (1981).\nThe wave breaking criterion is derived in a hydrostatic, non-rotating frame. Including nonhydrostatic and rotation is proved to have negligible impacts.\nThe gravity wave is intermittent and the intermittency is computed as the ratio of the total long-term average source to the integral of the source momentum flux spectrum.","category":"page"},{"location":"gravity_wave/#Spetrum-of-the-momentum-flux-sources","page":"Gravity wave","title":"Spetrum of the momentum flux sources","text":"","category":"section"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"The source spectrum with respect to phase speed is prescribed in Eq. (17) in Joan M Alexander, Timothy J Dunkerton (1999). We adapt the equation so that the spectrum writes as a combination of a wide and a narrow band as","category":"page"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"B_0(c) = fracF_S0(c)rho_0 = sgn(c-u_0) left( Bm_w expleft -left( fracc-c_0c_w_w right) ln2 right + Bm_n expleft -left( fracc-c_0c_w_n right) ln2 right right)","category":"page"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"where the subscript 0 denotes values at the source level. c_0 is the phase speed with the maximum flux magnitude Bm. c_w is the half-width at half-maximum of the Gaussian.  _w and _n represent the wide and narrow bands of the spectra.","category":"page"},{"location":"gravity_wave/#Upward-propagation-and-wave-breaking","page":"Gravity wave","title":"Upward propagation and wave breaking","text":"","category":"section"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"Waves that are reflected will be removed from the spectrum. A wave that breaks at a level above the source will deposit all its momentum flux into that level and be removed from the spectrum.","category":"page"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"The reflection frequency is defined as","category":"page"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"omega_r(z) = (fracN(z)^2 k^2k^2+alpha^2)^12","category":"page"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"where N(z) is the buoyancy frequency, k is the horizontal wavenumber that corresponds to a wavelength of 300 km, alpha = 1H where H is the scale height. omega_r(z) is used to determine for each monochromatic wave in the spectrum, whether it will be reflected at height z.","category":"page"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"The instability condition is defined as","category":"page"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"Q(zc) = fracrho_0rho(z) frac2N(z)B_0(c)kc-u(z)^3","category":"page"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"Q(zc) is used to determine whether the monochromatic wave of phase speed c gets unstable at height z. ","category":"page"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"At the source level\nif omega=kc-u_0 geq omega_r, this wave would have undergone internal reflection somewhere below and is removed from the spectrum;\nif Q(z_0 c) geq 1, it is also removed because it is not stable at the source level.\nAt the levels above (z_nz_0), omega(z_n)=kc-u(z_n) geq omega_r(z_n) is removed from the spectrum. In the remaining speed, Q(z_nc) geq 1 are breaking between level z_n-1 and z_n, and this portion of momentum flux is all deposited between z_n-1 and z_n, which yields\nX(z_n-12) = fracepsilon rho_0rho(z_n-12)Sigma_j (B_0)j\nwhere epsilon=F_S0rho_0Sigma B_0 is the wave intermittency. In computing the intermittency, F_S0 is the time average total momentum flux and is prescribed as latitude dependent properties.  And we get \nX(z_n-1) = 05*leftX(z_n-32) +X(z_n-12) right","category":"page"},{"location":"gravity_wave/","page":"Gravity wave","title":"Gravity wave","text":"By applying the above parameterization on zonal and meridional winds, the forcing for the physical wind velocity is computed. We further transform them onto the Covariant vectors and that will be the tendencied added onto the momentum equation.","category":"page"},{"location":"gravity_wave/#Orographic-gravity-wave","page":"Gravity wave","title":"Orographic gravity wave","text":"","category":"section"},{"location":"cl_args/#Command-line-arguments","page":"Command line arguments","title":"Command line arguments","text":"","category":"section"},{"location":"cl_args/","page":"Command line arguments","title":"Command line arguments","text":"include(\"cl_args.jl\");","category":"page"},{"location":"repl_scripts/#Julia-scripts-per-Buildkite-job","page":"REPL scripts","title":"Julia scripts per Buildkite job","text":"","category":"section"},{"location":"repl_scripts/","page":"REPL scripts","title":"REPL scripts","text":"include(\"repl_scripts.jl\")","category":"page"},{"location":"contributor_guide/#Contributors-Guide","page":"Contributor Guide","title":"Contributors Guide","text":"","category":"section"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Thank you for considering contributions to ClimaAtmos! We hope this guide helps you make a contribution.","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Feel free to ask us questions and chat with us at any time about any topic at all by:","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Opening a GitHub issue","category":"page"},{"location":"contributor_guide/#Creating-issues","page":"Contributor Guide","title":"Creating issues","text":"","category":"section"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"The simplest way to contribute to ClimaAtmos is to create or comment on issues.","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"The most useful bug reports:","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Provide an explicit code snippet –- not just a link –- that reproduces the bug in the latest tagged version of ClimaAtmos. This is sometimes called the \"minimal working example\". Reducing bug-producing code to a minimal example can dramatically decrease the time it takes to resolve an issue.\nPaste the entire error received when running the code snippet, even if it's unbelievably long.\nUse triple backticks (e.g., ```some_code; and_some_more_code;```) to enclose code snippets, and other markdown formatting syntax to make your issue easy and quick to read.\nReport the ClimaAtmos version, Julia version, machine (especially if using a GPU) and any other possibly useful details of the computational environment in which the bug was created.","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Discussions are recommended for asking questions about (for example) the user interface, implementation details, science, and life in general.","category":"page"},{"location":"contributor_guide/#But-I-want-to-*code*!","page":"Contributor Guide","title":"But I want to code!","text":"","category":"section"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"New users help write ClimaAtmos code and documentation by forking the ClimaAtmos repository, using git to edit code and docs, and then creating a pull request. Pull requests are reviewed by ClimaAtmos collaborators.\nA pull request can be merged once it is reviewed and approved by collaborators. If the pull request author has write access, they have the responsibility of merging their pull request. Otherwise, ClimaAtmos.jl collabators will execute the merge with permission from the pull request author.\nNote: for small or minor changes (such as fixing a typo in documentation), the GitHub editor is super useful for forking and opening a pull request with a single click.\nWrite your code with love and care. In particular, conform to existing ClimaAtmos style and formatting conventions. For example, we love verbose and explicit variable names, use TitleCase for types, snake_case for objects, and always.put.spaces.after.commas. For formatting decisions we loosely follow the YASGuide. It's worth few extra minutes of our time to leave future generations with well-written, readable code.","category":"page"},{"location":"contributor_guide/#General-coding-guidelines","page":"Contributor Guide","title":"General coding guidelines","text":"","category":"section"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Keep the number of members of Julia structs small if possible (less than 8 members).\nCode should reflect \"human intuition\" if possible. This mean abstraction should reflect how humans reason about the problem under consideration.\nCode with small blast radius. If your code needs to be modified or extendended, the resulting required changes should be as small and as localized as possible.\nWhen you write code, write it with testing and debugging in mind.\nIdeally, the lowest level structs have no defaults for their member fields. Nobody can remember all the defaults, so it is better to introduce them at the high-level API only.\nMake sure that module imports are specific so that it is easy to trace back where functions that are used inside a module are coming from.\nConsider naming abstract Julia types \"AbstractMyType\" in order to avoid confusion for the reader of your code.\nComments in your code should explain why the code exists and clarify if necessary, not just restate the line of code in words.\nBe mindful of namespace issues when writing functional code, especially when writing function code that represents mathematical or physical concepts.\nCondider using keywords in your structs to allow readers to more effectively reason about your code.","category":"page"},{"location":"contributor_guide/#What-is-a-\"collaborator\"-and-how-can-I-become-one?","page":"Contributor Guide","title":"What is a \"collaborator\" and how can I become one?","text":"","category":"section"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Collaborators have permissions to review pull requests and status allows a contributor to review pull requests in addition to opening them. Collaborators can also create branches in the main ClimaAtmos repository.\nWe ask that new contributors try their hand at forking ClimaAtmos, and opening and merging a pull request before requesting collaborator status.","category":"page"},{"location":"contributor_guide/#What's-a-good-way-to-start-developing-ClimaAtmos?","page":"Contributor Guide","title":"What's a good way to start developing ClimaAtmos?","text":"","category":"section"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Tackle an existing issue. We keep a list of good first issues that are self-contained and suitable for a newcomer to try and work on.\nTry to run ClimaAtmos and play around with it to simulate your favorite fluids and atmosphere physics. If you run into any problems or find it difficult to use or understand, please open an issue!\nWrite up an example or tutorial on how to do something useful with ClimaAtmos, like how to set up a new physical configuration.\nImprove documentation or comments if you found something hard to use.\nImplement a new feature if you need it to use ClimaAtmos.","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"If you're interested in working on something, let us know by commenting on existing issues or  by opening a new issue. This is to make sure no one else is working on the same issue and so  we can help and guide you in case there is anything you need to know beforehand.","category":"page"},{"location":"contributor_guide/#Ground-Rules","page":"Contributor Guide","title":"Ground Rules","text":"","category":"section"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Each pull request should consist of a logical collection of changes. You can include multiple bug fixes in a single pull request, but they should be related. For unrelated changes, please submit multiple pull requests.\nDo not commit changes to files that are irrelevant to your feature or bugfix (eg: .gitignore).\nBe willing to accept criticism and work on improving your code; we don't want to break other users' code, so care must be taken not to introduce bugs. We discuss pull requests and keep working on them until we believe we've done a good job.\nBe aware that the pull request review process is not immediate, and is generally proportional to the size of the pull request.","category":"page"},{"location":"contributor_guide/#Reporting-a-bug","page":"Contributor Guide","title":"Reporting a bug","text":"","category":"section"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"The easiest way to get involved is to report issues you encounter when using ClimaAtmos or by requesting something you think is missing.","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Head over to the issues page.\nSearch to see if your issue already exists or has even been solved previously.\nIf you indeed have a new issue or request, click the \"New Issue\" button.\nPlease be as specific as possible. Include the version of the code you were using, as well as what operating system you are running. The output of Julia's versioninfo() and ] status is helpful to include. Try your best to include a complete, \"minimal working example\" that reproduces the issue.","category":"page"},{"location":"contributor_guide/#Setting-up-your-development-environment","page":"Contributor Guide","title":"Setting up your development environment","text":"","category":"section"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Install Julia on your system.\nInstall git on your system if it is not already there (install XCode command line tools on a Mac or git bash on Windows).\nLogin to your GitHub account and make a fork of the ClimaAtmos repository by clicking the \"Fork\" button.\nClone your fork of the ClimaAtmos repository (in terminal on Mac/Linux or git shell/ GUI on Windows) in the location you'd like to keep it.\ngit clone https://github.com/your-user-name/ClimaAtmos.jl.git\nNavigate to that folder in the terminal or in Anaconda Prompt if you're on Windows.\nConnect your repository to the upstream (main project).\ngit remote add ClimaAtmos https://github.com/CLiMA/ClimaAtmos.jl.git\nCreate the development environment by opening Julia via julia --project then typing in ] instantiate. This will install all the dependencies in the Project.toml file.\nYou can test to make sure ClimaAtmos works by typing in ] test. Doing so will run all the tests (and this can take a while).","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Your development environment is now ready!","category":"page"},{"location":"contributor_guide/#Pull-Requests","page":"Contributor Guide","title":"Pull Requests","text":"","category":"section"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"We follow the ColPrac guide for collaborative practices. We ask that new contributors read that guide before submitting a pull request.","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Changes and contributions should be made via GitHub pull requests against the main branch.","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"When you're done making changes, commit the changes you made. Chris Beams has written a  guide on how to write good commit messages.","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"When you think your changes are ready to be merged into the main repository, push to your fork and submit a pull request.","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Working on your first Pull Request? You can learn how from this free video series How to Contribute to an Open Source Project on GitHub, Aaron Meurer's tutorial on the git workflow, or the guide “How to Contribute to Open Source\".","category":"page"},{"location":"contributor_guide/#Documentation","page":"Contributor Guide","title":"Documentation","text":"","category":"section"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Generally, we follow the Julia conventions for documentation https://docs.julialang.org/en/v1/manual/documentation/.","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Now that you've made your awesome contribution, it's time to tell the world how to use it. Writing documentation strings is really important to make sure others use your functionality properly. Didn't write new functions? That's fine, but be sure that the documentation for the code you touched is still in great shape. It is not uncommon to find some strange wording or clarification that you can take care of while you are here.","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"Here is an example of a docstring:","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"TODO: add example","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"You can preview how the Documentation will look like after merging by building the documentation  locally. From the main directory of your local repository call","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"julia --project -e 'using Pkg; Pkg.instantiate()'\njulia --project=docs/ -e 'using Pkg; Pkg.instantiate()'\nJULIA_DEBUG=Documenter julia --project=docs/ docs/make.jl","category":"page"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"and then open docs/build/index.html in your favorite browser. Providing the environment variable  JULIA_DEBUG=Documenter will provide with more information in the documentation build process and thus help figuring out a potential bug.","category":"page"},{"location":"contributor_guide/#Credits","page":"Contributor Guide","title":"Credits","text":"","category":"section"},{"location":"contributor_guide/","page":"Contributor Guide","title":"Contributor Guide","text":"This contributor's guide is heavily based on the excellent Oceananigans.jl contributor's guide which is heavily based on the excellent MetPy contributor's guide.","category":"page"},{"location":"#ClimaAtmos.jl","page":"Home","title":"ClimaAtmos.jl","text":"","category":"section"},{"location":"installation_instructions/#Installation-instructions","page":"Installation instructions","title":"Installation instructions","text":"","category":"section"},{"location":"installation_instructions/","page":"Installation instructions","title":"Installation instructions","text":"Download the ClimaAtmos source with:","category":"page"},{"location":"installation_instructions/","page":"Installation instructions","title":"Installation instructions","text":"$ git clone https://github.com/CliMA/ClimaAtmos.jl.git","category":"page"},{"location":"installation_instructions/","page":"Installation instructions","title":"Installation instructions","text":"Now change into the ClimaAtmos.jl directory with ","category":"page"},{"location":"installation_instructions/","page":"Installation instructions","title":"Installation instructions","text":"$ cd ClimaAtmos.jl","category":"page"},{"location":"installation_instructions/","page":"Installation instructions","title":"Installation instructions","text":"To use ClimaAtmos, you need to instantiate all dependencies with:","category":"page"},{"location":"installation_instructions/","page":"Installation instructions","title":"Installation instructions","text":"$ julia --project\njulia>]\n(v1.8) pkg> instantiate","category":"page"}]
}
