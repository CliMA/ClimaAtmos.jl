<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · ClimaAtmos.jl</title><meta name="title" content="API · ClimaAtmos.jl"/><meta property="og:title" content="API · ClimaAtmos.jl"/><meta property="twitter:title" content="API · ClimaAtmos.jl"/><meta name="description" content="Documentation for ClimaAtmos.jl."/><meta property="og:description" content="Documentation for ClimaAtmos.jl."/><meta property="twitter:description" content="Documentation for ClimaAtmos.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="ClimaAtmos.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">ClimaAtmos.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../getting_started/">Getting Started</a></li><li><a class="tocitem" href="../contributor_guide/">Contributor Guide</a></li><li><a class="tocitem" href="../equations/">Equations</a></li><li><a class="tocitem" href="../microphysics/">Microphysics</a></li><li><a class="tocitem" href="../edmf_equations/">EDMF Equations</a></li><li><a class="tocitem" href="../diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../grids/">Grids</a></li><li><a class="tocitem" href="../available_diagnostics/">Available Diagnostics</a></li><li><a class="tocitem" href="../diagnostic_edmf_equations/">Diagnostic EDMF Equations</a></li><li><a class="tocitem" href="../gravity_wave/">Gravity Wave Drag Parameterizations</a></li><li><a class="tocitem" href="../surface_albedo/">Ocean Surface Albedo Parameterization</a></li><li><a class="tocitem" href="../topography/">Topography Representation</a></li><li><a class="tocitem" href="../tracers/">Tracers</a></li><li><a class="tocitem" href="../implicit_solver/">Implicit Solver</a></li><li><a class="tocitem" href="../radiative_equilibrium/">Radiative Equilibrium</a></li><li><a class="tocitem" href="../single_column_prospect/">Single Column Model</a></li><li><a class="tocitem" href="../restarts/">Restarts and checkpoints</a></li><li><a class="tocitem" href="../repl_scripts/">REPL scripts</a></li><li><a class="tocitem" href="../config/">Configuration</a></li><li><a class="tocitem" href="../parameters/">Parameters</a></li><li><a class="tocitem" href="../longruns/">Longruns</a></li><li><a class="tocitem" href="../itime/">The time type</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Initial-conditions"><span>Initial conditions</span></a></li><li><a class="tocitem" href="#Helper"><span>Helper</span></a></li><li><a class="tocitem" href="#Grids"><span>Grids</span></a></li><li><a class="tocitem" href="#Jacobian"><span>Jacobian</span></a></li><li><a class="tocitem" href="#Topography"><span>Topography</span></a></li></ul></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaAtmos.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CliMA/ClimaAtmos.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h2 id="Initial-conditions"><a class="docs-heading-anchor" href="#Initial-conditions">Initial conditions</a><a id="Initial-conditions-1"></a><a class="docs-heading-anchor-permalink" href="#Initial-conditions" title="Permalink"></a></h2><h3 id="General"><a class="docs-heading-anchor" href="#General">General</a><a id="General-1"></a><a class="docs-heading-anchor-permalink" href="#General" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.InitialCondition"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.InitialCondition"><code>ClimaAtmos.InitialConditions.InitialCondition</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">InitialCondition</code></pre><p>A mechanism for specifying the <code>LocalState</code> of an <code>AtmosModel</code> at every point in the domain. Given some <code>initial_condition</code>, calling <code>initial_condition(params)</code> returns a function of the form <code>local_state(local_geometry)::LocalState</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L1-L7">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.IsothermalProfile"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.IsothermalProfile"><code>ClimaAtmos.InitialConditions.IsothermalProfile</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">IsothermalProfile(; temperature = 300)</code></pre><p>An <code>InitialCondition</code> with a uniform temperature profile.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L115-L119">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.DecayingProfile"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.DecayingProfile"><code>ClimaAtmos.InitialConditions.DecayingProfile</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">DecayingProfile(; perturb = true)</code></pre><p>An <code>InitialCondition</code> with a decaying temperature profile, and with an optional perturbation to the temperature.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L146-L151">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.hydrostatic_pressure_profile"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.hydrostatic_pressure_profile"><code>ClimaAtmos.InitialConditions.hydrostatic_pressure_profile</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">hydrostatic_pressure_profile(; thermo_params, p_0, [T, θ, q_tot, z_max])</code></pre><p>Solves the initial value problem <code>p&#39;(z) = -g * ρ(z)</code> for all <code>z ∈ [0, z_max]</code>, given <code>p(0)</code>, either <code>T(z)</code> or <code>θ(z)</code>, and optionally also <code>q_tot(z)</code>. If <code>q_tot(z)</code> is not given, it is assumed to be 0. If <code>z_max</code> is not given, it is assumed to be 30 km. Note that <code>z_max</code> should be the maximum elevation to which the specified profiles T(z), θ(z), and/or q_tot(z) are valid.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L1367-L1375">source</a></section></details></article><h3 id="Plane-/-Box"><a class="docs-heading-anchor" href="#Plane-/-Box">Plane / Box</a><a id="Plane-/-Box-1"></a><a class="docs-heading-anchor-permalink" href="#Plane-/-Box" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.ConstantBuoyancyFrequencyProfile"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.ConstantBuoyancyFrequencyProfile"><code>ClimaAtmos.InitialConditions.ConstantBuoyancyFrequencyProfile</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">ConstantBuoyancyFrequencyProfile()</code></pre><p>An <code>InitialCondition</code> with a constant Brunt-Vaisala frequency and constant wind velocity, where the pressure profile is hydrostatically balanced. This is currently the only <code>InitialCondition</code> that supports the approximation of a steady-state solution.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L93-L100">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.DryDensityCurrentProfile"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.DryDensityCurrentProfile"><code>ClimaAtmos.InitialConditions.DryDensityCurrentProfile</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">DryDensityCurrentProfile(; perturb = false)</code></pre><p>An <code>InitialCondition</code> with an isothermal background profile, with a negatively buoyant bubble, and with an optional perturbation to the temperature.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L242-L248">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.RisingThermalBubbleProfile"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.RisingThermalBubbleProfile"><code>ClimaAtmos.InitialConditions.RisingThermalBubbleProfile</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">RisingThermalBubbleProfile(; perturb = false)</code></pre><p>An <code>InitialCondition</code> with an isothermal background profile, with a positively buoyant bubble, and with an optional perturbation to the temperature.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L301-L306">source</a></section></details></article><h3 id="Sphere"><a class="docs-heading-anchor" href="#Sphere">Sphere</a><a id="Sphere-1"></a><a class="docs-heading-anchor-permalink" href="#Sphere" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.DryBaroclinicWave"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.DryBaroclinicWave"><code>ClimaAtmos.InitialConditions.DryBaroclinicWave</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">DryBaroclinicWave(; perturb = true, deep_atmosphere = false)</code></pre><p>An <code>InitialCondition</code> with a dry baroclinic wave, and with an optional perturbation to the horizontal velocity.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L1167-L1172">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.MoistBaroclinicWaveWithEDMF"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.MoistBaroclinicWaveWithEDMF"><code>ClimaAtmos.InitialConditions.MoistBaroclinicWaveWithEDMF</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MoistBaroclinicWaveWithEDMF(; perturb = true, deep_atmosphere = false)</code></pre><p>The same <code>InitialCondition</code> as <code>MoistBaroclinicWave</code>, except with an initial TKE of 0 and an initial draft area fraction of 0.2.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L1241-L1246">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.MoistAdiabaticProfileEDMFX"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.MoistAdiabaticProfileEDMFX"><code>ClimaAtmos.InitialConditions.MoistAdiabaticProfileEDMFX</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MoistAdiabaticProfileEDMFX(; perturb = true)</code></pre><p>An <code>InitialCondition</code> with a moist adiabatic temperature profile, and with an optional perturbation to the temperature.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L1281-L1286">source</a></section></details></article><h3 id="Cases-from-literature"><a class="docs-heading-anchor" href="#Cases-from-literature">Cases from literature</a><a id="Cases-from-literature-1"></a><a class="docs-heading-anchor-permalink" href="#Cases-from-literature" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.GABLS"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.GABLS"><code>ClimaAtmos.InitialConditions.GABLS</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">GABLS</code></pre><p>The <code>InitialCondition</code> described in [<a href="../references/#Kosovic2000">9</a>], but with a hydrostatically balanced pressure profile.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L1414-L1419">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.DYCOMS_RF01"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.DYCOMS_RF01"><code>ClimaAtmos.InitialConditions.DYCOMS_RF01</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">DYCOMS_RF01</code></pre><p>The <code>InitialCondition</code> described in [<a href="../references/#Stevens2005">10</a>], but with a hydrostatically balanced pressure profile.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L1553-L1558">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.DYCOMS_RF02"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.DYCOMS_RF02"><code>ClimaAtmos.InitialConditions.DYCOMS_RF02</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">DYCOMS_RF02</code></pre><p>The <code>InitialCondition</code> described in [<a href="../references/#Ackerman2009">11</a>], but with a hydrostatically balanced pressure profile.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L1563-L1568">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.Rico"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.Rico"><code>ClimaAtmos.InitialConditions.Rico</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Rico</code></pre><p>The <code>InitialCondition</code> described in [<a href="../references/#Rauber2007">12</a>], but with a hydrostatically balanced pressure profile.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L1610-L1615">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.TRMM_LBA"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.TRMM_LBA"><code>ClimaAtmos.InitialConditions.TRMM_LBA</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">TRMM_LBA</code></pre><p>The <code>InitialCondition</code> described in [<a href="../references/#Grabowski2006">13</a>], but with a hydrostatically balanced pressure profile.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L1647-L1652">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.Bomex"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.Bomex"><code>ClimaAtmos.InitialConditions.Bomex</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Bomex</code></pre><p>The <code>InitialCondition</code> described in [<a href="../references/#Holland1973">14</a>], but with a hydrostatically balanced pressure profile.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L1505-L1510">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.Soares"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.Soares"><code>ClimaAtmos.InitialConditions.Soares</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Soares</code></pre><p>The <code>InitialCondition</code> described in [<a href="../references/#Soares2004">15</a>], but with a hydrostatically balanced pressure profile.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L1495-L1500">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.RCEMIPIIProfile"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.RCEMIPIIProfile"><code>ClimaAtmos.InitialConditions.RCEMIPIIProfile</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">RCEMIPIIProfile(temperature, humidity)</code></pre><p>An <code>InitialCondition</code> following the sounding to initialize simulations for RCEMIPII as described by Wing et. al. (2018) (https://doi.org/10.5194/gmd-11-793-2018). There are three input profiles: RCEMIPIIProfile<em>295, RCEMIPIIProfile</em>300, and RCEMIPIIProfile<em>305, that specify three different SST temperatures and different initial specific humidity profiles. Note: this should be used for RCE</em>small and NOT RCE<em>large - RCE</em>large must be initialized with the final state of RCE_small.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L359-L369">source</a></section></details></article><h2 id="Helper"><a class="docs-heading-anchor" href="#Helper">Helper</a><a id="Helper-1"></a><a class="docs-heading-anchor-permalink" href="#Helper" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="ClimaAtmos.InitialConditions.ColumnInterpolatableField"><a class="docstring-binding" href="#ClimaAtmos.InitialConditions.ColumnInterpolatableField"><code>ClimaAtmos.InitialConditions.ColumnInterpolatableField</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">ColumnInterpolatableField(::Fields.ColumnField)</code></pre><p>A column field object that can be interpolated in the z-coordinate. For example:</p><pre><code class="language-julia hljs">cif = ColumnInterpolatableField(column_field)
z = 1.0
column_field_at_z = cif(z)</code></pre><div class="admonition is-category-warn" id="Warn-1caf6ad00a2392b5"><header class="admonition-header">Warn<a class="admonition-anchor" href="#Warn-1caf6ad00a2392b5" title="Permalink"></a></header><div class="admonition-body"><p>This function allocates and is not GPU-compatible so please avoid using this inside <code>step!</code> only use this for initialization.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/initial_conditions/initial_conditions.jl#L19-L35">source</a></section></details></article><h2 id="Grids"><a class="docs-heading-anchor" href="#Grids">Grids</a><a id="Grids-1"></a><a class="docs-heading-anchor-permalink" href="#Grids" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="ClimaAtmos.ColumnGrid"><a class="docstring-binding" href="#ClimaAtmos.ColumnGrid"><code>ClimaAtmos.ColumnGrid</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">ColumnGrid(::Type{FT}; kwargs...)</code></pre><p>Create a ColumnGrid.</p><p><strong>Arguments</strong></p><ul><li><code>FT</code>: the floating-point type [<code>Float32</code>, <code>Float64</code>]</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>context = ClimaComms.context()</code>: the ClimaComms communications context</li><li><code>z_elem = 10</code>: the number of z-points</li><li><code>z_max = 30000.0</code>: the domain maximum along the z-direction</li><li><code>z_stretch = true</code>: whether to use vertical stretching</li><li><code>dz_bottom = 500.0</code>: bottom layer thickness for stretching</li><li><code>z_mesh</code>: Optionally provide a custom z-mesh, instead of <code>z_elem</code>, <code>z_max</code>, <code>z_stretch</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/simulation/grids.jl#L90-L105">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.SphereGrid"><a class="docstring-binding" href="#ClimaAtmos.SphereGrid"><code>ClimaAtmos.SphereGrid</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">SphereGrid(::Type{FT}; kwargs...)</code></pre><p>Create an ExtrudedCubedSphereGrid with topography support.</p><p><strong>Arguments</strong></p><ul><li><code>FT</code>: the floating-point type [<code>Float32</code>, <code>Float64</code>]</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>context = ClimaComms.context()</code>: the ClimaComms communications context</li><li><code>z_elem = 10</code>: the number of z-points</li><li><code>z_max = 30000.0</code>: the domain maximum along the z-direction</li><li><code>z_stretch = true</code>: whether to use vertical stretching</li><li><code>dz_bottom = 500.0</code>: bottom layer thickness for stretching</li><li><code>z_mesh</code>: Optionally provide a custom z-mesh, instead of <code>z_elem</code>, <code>z_max</code>, <code>z_stretch</code></li><li><code>radius = 6.371229e6</code>: the radius of the cubed sphere</li><li><code>h_elem = 6</code>: the number of horizontal elements per side of every panel (6 panels in total)</li><li><code>nh_poly = 3</code>: the polynomial order. Note: The number of quadrature points in 1D within each horizontal element is then <code>n_quad_points = nh_poly + 1</code></li><li><code>bubble = false</code>: enables the &quot;bubble correction&quot; for more accurate element areas when computing the spectral element space</li><li><code>deep_atmosphere = true</code>: use deep atmosphere equations and metric terms, otherwise assume columns are cylindrical (shallow atmosphere)</li><li><code>topography = NoTopography()</code>: topography type</li><li><code>topography_damping_factor = 5.0</code>: factor by which smallest resolved length-scale is to be damped</li><li><code>mesh_warp_type = SLEVEWarp{FT}()</code>: mesh warping type (<a href="#ClimaAtmos.SLEVEWarp"><code>SLEVEWarp</code></a> or <a href="#ClimaAtmos.LinearWarp"><code>LinearWarp</code></a>)</li><li><code>topo_smoothing = false</code>: apply topography smoothing</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/simulation/grids.jl#L9-L39">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.PlaneGrid"><a class="docstring-binding" href="#ClimaAtmos.PlaneGrid"><code>ClimaAtmos.PlaneGrid</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">PlaneGrid(::Type{FT}; kwargs...)</code></pre><p>Create a SliceXZGrid with topography support.</p><p><strong>Arguments</strong></p><ul><li><code>FT</code>: the floating-point type [<code>Float32</code>, <code>Float64</code>]</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>context = ClimaComms.context()</code>: the ClimaComms communications context</li><li><code>x_elem = 6</code>: the number of x-points</li><li><code>x_max = 300000.0</code>: the domain maximum along the x-direction</li><li><code>z_elem = 10</code>: the number of z-points</li><li><code>z_max = 30000.0</code>: the domain maximum along the z-direction</li><li><code>z_mesh = DefaultZMesh(FT; z_min = 0, z_max, z_elem, z_stretch)</code>: the vertical mesh</li><li><code>nh_poly = 3</code>: the polynomial order. Note: The number of quadrature points in 1D within each horizontal element is then <code>n_quad_points = nh_poly + 1</code></li><li><code>z_stretch = true</code>: whether to use vertical stretching</li><li><code>dz_bottom = 500.0</code>: bottom layer thickness for stretching</li><li><code>periodic_x = true</code>: use periodic domain along x-direction</li><li><code>topography = NoTopography()</code>: topography type</li><li><code>topography_damping_factor = 5.0</code>: factor by which smallest resolved length-scale is to be damped</li><li><code>mesh_warp_type = LinearWarp()</code>: mesh warping type (<a href="#ClimaAtmos.SLEVEWarp"><code>SLEVEWarp</code></a> or <a href="#ClimaAtmos.LinearWarp"><code>LinearWarp</code></a>)</li><li><code>topo_smoothing = false</code>: apply topography smoothing</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/simulation/grids.jl#L201-L227">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.BoxGrid"><a class="docstring-binding" href="#ClimaAtmos.BoxGrid"><code>ClimaAtmos.BoxGrid</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">BoxGrid(::Type{FT}; kwargs...)</code></pre><p>Create a Box3DGrid with topography support.</p><p><strong>Arguments</strong></p><ul><li><code>FT</code>: the floating-point type [<code>Float32</code>, <code>Float64</code>]</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>context = ClimaComms.context()</code>: the ClimaComms communications context</li><li><code>x_elem = 6</code>: the number of x-points</li><li><code>x_max = 300000.0</code>: the domain maximum along the x-direction</li><li><code>y_elem = 6</code>: the number of y-points</li><li><code>y_max = 300000.0</code>: the domain maximum along the y-direction</li><li><code>z_elem = 10</code>: the number of z-points</li><li><code>z_max = 30000.0</code>: the domain maximum along the z-direction</li><li><code>nh_poly = 3</code>: the polynomial order. Note: The number of quadrature points in 1D within each horizontal element is then <code>n_quad_points = nh_poly + 1</code></li><li><code>z_stretch = true</code>: whether to use vertical stretching</li><li><code>dz_bottom = 500.0</code>: bottom layer thickness for vertical stretching</li><li><code>z_mesh</code>: Optionally provide a custom z-mesh, instead of <code>z_elem</code>, <code>z_max</code>, <code>z_stretch</code></li><li><code>bubble = false</code>: enables the &quot;bubble correction&quot; for more accurate element areas when computing the spectral element space.</li><li><code>periodic_x = true</code>: use periodic domain along x-direction</li><li><code>periodic_y = true</code>: use periodic domain along y-direction</li><li><code>topography = NoTopography()</code>: topography type</li><li><code>topography_damping_factor = 5.0</code>: factor by which smallest resolved length-scale is to be damped</li><li><code>mesh_warp_type = LinearWarp()</code>: mesh warping type (<a href="#ClimaAtmos.SLEVEWarp"><code>SLEVEWarp</code></a> or <a href="#ClimaAtmos.LinearWarp"><code>LinearWarp</code></a>)</li><li><code>topo_smoothing = false</code>: apply topography smoothing</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/simulation/grids.jl#L127-L158">source</a></section></details></article><h2 id="Jacobian"><a class="docs-heading-anchor" href="#Jacobian">Jacobian</a><a id="Jacobian-1"></a><a class="docs-heading-anchor-permalink" href="#Jacobian" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="ClimaAtmos.Jacobian"><a class="docstring-binding" href="#ClimaAtmos.Jacobian"><code>ClimaAtmos.Jacobian</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Jacobian(alg, Y, atmos; [verbose])</code></pre><p>Wrapper for a <a href="#ClimaAtmos.JacobianAlgorithm"><code>JacobianAlgorithm</code></a> and its cache, which it uses to update and invert the Jacobian. The optional <code>verbose</code> flag specifies whether debugging information should be printed during initialization.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/prognostic_equations/implicit/jacobian.jl#L19-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.JacobianAlgorithm"><a class="docstring-binding" href="#ClimaAtmos.JacobianAlgorithm"><code>ClimaAtmos.JacobianAlgorithm</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">JacobianAlgorithm</code></pre><p>A description of how to compute the matrix <span>$∂R/∂Y$</span>, where <span>$R(Y)$</span> denotes the residual of an implicit step with the state <span>$Y$</span>. Concrete implementations of this abstract type should define 3 methods:</p><ul><li><code>jacobian_cache(alg::JacobianAlgorithm, Y, atmos; [verbose])</code></li><li><code>update_jacobian!(alg::JacobianAlgorithm, cache, Y, p, dtγ, t)</code></li><li><code>invert_jacobian!(alg::JacobianAlgorithm, cache, ΔY, R)</code></li></ul><p>To facilitate debugging, concrete implementations should also define</p><ul><li><code>first_column_block_arrays(alg::JacobianAlgorithm, Y, p, dtγ, t)</code></li></ul><p>See <a href="../implicit_solver/#Implicit-Solver">Implicit Solver</a> for additional background information.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/prognostic_equations/implicit/jacobian.jl#L1-L14">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.ManualSparseJacobian"><a class="docstring-binding" href="#ClimaAtmos.ManualSparseJacobian"><code>ClimaAtmos.ManualSparseJacobian</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">ManualSparseJacobian(
    topography_flag,
    diffusion_flag,
    sgs_advection_flag,
    sgs_entr_detr_flag,
    sgs_mass_flux_flag,
    sgs_nh_pressure_flag,
    sgs_vertdiff_flag,
    approximate_solve_iters,
)</code></pre><p>A <a href="#ClimaAtmos.JacobianAlgorithm"><code>JacobianAlgorithm</code></a> that approximates the Jacobian using analytically derived tendency derivatives and inverts it using a specialized nested linear solver. Certain groups of derivatives can be toggled on or off by setting their <code>DerivativeFlag</code>s to either <code>UseDerivative</code> or <code>IgnoreDerivative</code>.</p><p><strong>Arguments</strong></p><ul><li><code>topography_flag::DerivativeFlag</code>: whether the derivative of vertical contravariant velocity with respect to horizontal covariant velocity should be computed</li><li><code>diffusion_flag::DerivativeFlag</code>: whether the derivatives of the grid-scale diffusion tendency should be computed</li><li><code>sgs_advection_flag::DerivativeFlag</code>: whether the derivatives of the subgrid-scale advection tendency should be computed</li><li><code>sgs_entr_detr_flag::DerivativeFlag</code>: whether the derivatives of the subgrid-scale entrainment and detrainment tendencies should be computed</li><li><code>sgs_mass_flux_flag::DerivativeFlag</code>: whether the derivatives of the subgrid-scale mass flux tendency should be computed</li><li><code>sgs_nh_pressure_flag::DerivativeFlag</code>: whether the derivatives of the subgrid-scale non-hydrostatic pressure drag tendency should be computed</li><li><code>sgs_vertdiff_flag::DerivativeFlag</code>: whether the derivatives of the subgrid-scale vertical diffusion tendency should be computed</li><li><code>approximate_solve_iters::Int</code>: number of iterations to take for the approximate linear solve required when the <code>diffusion_flag</code> is <code>UseDerivative</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/prognostic_equations/implicit/manual_sparse_jacobian.jl#L17-L53">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.AutoDenseJacobian"><a class="docstring-binding" href="#ClimaAtmos.AutoDenseJacobian"><code>ClimaAtmos.AutoDenseJacobian</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">AutoDenseJacobian([max_simultaneous_derivatives])</code></pre><p>A <a href="#ClimaAtmos.JacobianAlgorithm"><code>JacobianAlgorithm</code></a> that computes the Jacobian using forward-mode automatic differentiation, without making any assumptions about sparsity structure. After the dense matrix for each spatial column is updated, <a href="#ClimaAtmos.parallel_lu_factorize!"><code>parallel_lu_factorize!</code></a> computes its LU factorization in parallel across all columns. The linear solver is also run in parallel with <a href="#ClimaAtmos.parallel_lu_solve!"><code>parallel_lu_solve!</code></a>.</p><p>To automatically compute the derivative of <code>implicit_tendency!</code> with respect to <code>Y</code>, we first create copies of <code>Y</code>, <code>p.precomputed</code>, and <code>p.scratch</code> in which every floating-point number is replaced by a <a href="https://juliadiff.org/ForwardDiff.jl/stable/dev/how_it_works/">dual number</a> from <code>ForwardDiff.jl</code>. A dual number can be expressed as <span>$Xᴰ = X + ε₁x₁ + ε₂x₂ + ... + εₙxₙ$</span>, where <span>$X$</span> and <span>$xᵢ$</span> are floating-point numbers, and where <span>$εᵢ$</span> is a hyperreal number that satisfies <span>$εᵢεⱼ = 0$</span>. If the <span>$i$</span>-th value in dual column state <span>$Yᴰ$</span> is set to <span>$Yᴰᵢ = Yᵢ + 1εᵢ$</span>, where <span>$Yᵢ$</span> is the <span>$i$</span>-th value in the column state <span>$Y$</span>, then evaluating the implicit tendency of the dual column state generates a dense representation of the Jacobian matrix <span>$∂T/∂Y$</span>. Specifically, the <span>$i$</span>-th value in the dual column tendency <span>$Tᴰ = T(Yᴰ)$</span> is <span>$Tᴰᵢ = Tᵢ + (∂Tᵢ/∂Y₁)ε₁ + ... + (∂Tᵢ/∂Yₙ)εₙ$</span>, where <span>$Tᵢ$</span> is the <span>$i$</span>-th value in the column tendency <span>$T(Y)$</span>, and where <span>$n$</span> is the number of values in <span>$Y$</span>. In other words, the entry in the <span>$i$</span>-th row and <span>$j$</span>-th column of the matrix <span>$∂T/∂Y$</span> is the coefficient of <span>$εⱼ$</span> in <span>$Tᴰᵢ$</span>. The size of the dense matrix scales as <span>$O(n^2)$</span>, leading to very large memory requirements at higher vertical resolutions.</p><p>When the number of values in each column is very large, computing the entire dense matrix in a single evaluation of <code>implicit_tendency!</code> can be too expensive to compile and run. So, the dual number components are split into partitions with a maximum size of <code>max_simultaneous_derivatives</code>, and we call <code>implicit_tendency!</code> once for each partition. That is, if the partition size is <span>$s$</span>, then the first partition evaluates the coefficients of <span>$ε₁$</span> through <span>$εₛ$</span>, the second evaluates the coefficients of <span>$εₛ₊₁$</span> through <span>$ε₂ₛ$</span>, and so on until <span>$εₙ$</span>. The default partition size is 32.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/prognostic_equations/implicit/auto_dense_jacobian.jl#L7-L43">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.AutoSparseJacobian"><a class="docstring-binding" href="#ClimaAtmos.AutoSparseJacobian"><code>ClimaAtmos.AutoSparseJacobian</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">AutoSparseJacobian(sparse_jacobian_alg, [padding_bands_per_block])</code></pre><p>A <a href="#ClimaAtmos.JacobianAlgorithm"><code>JacobianAlgorithm</code></a> that computes the Jacobian using forward-mode automatic differentiation, assuming that the Jacobian&#39;s sparsity structure is given by <code>sparse_jacobian_alg</code>.</p><p>Only entries that are exptected to be nonzero according to the sparsity structure are updated, but any other entries that are nonzero can introduce errors to the updated entries. This issue can be avoided by adding padding bands to blocks that are likely to introduce errors. In cases where the default padding bands are insufficient, <code>padding_bands_per_block</code> can be specified to add a fixed number of padding bands to every block.</p><p>For more information about this algorithm, see <a href="../implicit_solver/#Implicit-Solver">Implicit Solver</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/prognostic_equations/implicit/auto_sparse_jacobian.jl#L3-L18">source</a></section></details></article><h2 id="Topography"><a class="docs-heading-anchor" href="#Topography">Topography</a><a id="Topography-1"></a><a class="docs-heading-anchor-permalink" href="#Topography" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="ClimaAtmos.CosineTopography"><a class="docstring-binding" href="#ClimaAtmos.CosineTopography"><code>ClimaAtmos.CosineTopography</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">CosineTopography{D, FT}(; h_max = 25, λ = 25e3)</code></pre><p>Cosine hill topography in 2D or 3D.</p><p><strong>Arguments</strong></p><ul><li><code>h_max::FT</code>: Maximum elevation (m)</li><li><code>λ::FT</code>: Wavelength of the cosine hills (m)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/topography/topography.jl#L25-L33">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.AgnesiTopography"><a class="docstring-binding" href="#ClimaAtmos.AgnesiTopography"><code>ClimaAtmos.AgnesiTopography</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">AgnesiTopography{FT}(; h_max = 25, x_center = 50e3, a = 5e3)</code></pre><p>Witch of Agnesi mountain topography for 2D simulations.</p><p><strong>Arguments</strong></p><ul><li><code>h_max</code>: Maximum elevation (m)</li><li><code>x_center</code>: Center position (m)</li><li><code>a</code>: Mountain width parameter (m)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/topography/topography.jl#L48-L57">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.ScharTopography"><a class="docstring-binding" href="#ClimaAtmos.ScharTopography"><code>ClimaAtmos.ScharTopography</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">ScharTopography{FT}(; h_max = 25, x_center = 50e3, λ = 4e3, a = 5e3)</code></pre><p>Schar mountain topography for 2D simulations.</p><p><strong>Arguments</strong></p><ul><li><code>h_max</code>: Maximum elevation (m)</li><li><code>x_center</code>: Center position (m)</li><li><code>λ</code>: Wavelength parameter (m)</li><li><code>a</code>: Mountain width parameter (m)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/topography/topography.jl#L67-L77">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.EarthTopography"><a class="docstring-binding" href="#ClimaAtmos.EarthTopography"><code>ClimaAtmos.EarthTopography</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">EarthTopography()</code></pre><p>Earth topography from ETOPO2022 data files.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/topography/topography.jl#L90-L94">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.DCMIP200Topography"><a class="docstring-binding" href="#ClimaAtmos.DCMIP200Topography"><code>ClimaAtmos.DCMIP200Topography</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">DCMIP200Topography()</code></pre><p>Surface elevation for the DCMIP-2-0-0 test problem.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/topography/topography.jl#L97-L101">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.Hughes2023Topography"><a class="docstring-binding" href="#ClimaAtmos.Hughes2023Topography"><code>ClimaAtmos.Hughes2023Topography</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Hughes2023Topography()</code></pre><p>Surface elevation for baroclinic wave test from Hughes and Jablonowski (2023).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/topography/topography.jl#L123-L127">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.SLEVEWarp"><a class="docstring-binding" href="#ClimaAtmos.SLEVEWarp"><code>ClimaAtmos.SLEVEWarp</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SLEVEWarp(; eta = 0.7, s = 10.0)</code></pre><p>Smooth Level Vertical (SLEVE) coordinate warping for terrain-following meshes.</p><p><strong>Arguments</strong></p><ul><li><code>eta</code>: Threshold parameter (if z/z_top &gt; eta, no warping is applied). Default: 0.7</li><li><code>s</code>: Decay scale parameter controlling how quickly the warping decays with height. Default: 10.0</li></ul><p><strong>References</strong></p><p>Schär et al. (2002), &quot;A new terrain-following vertical coordinate formulation  for atmospheric prediction models&quot;, Mon. Wea. Rev.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/topography/topography.jl#L172-L184">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.LinearWarp"><a class="docstring-binding" href="#ClimaAtmos.LinearWarp"><code>ClimaAtmos.LinearWarp</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">LinearWarp()</code></pre><p>Linear mesh warping that uniformly distributes vertical levels between the surface and top of the domain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/topography/topography.jl#L164-L169">source</a></section></details></article><h3 id="Internals"><a class="docs-heading-anchor" href="#Internals">Internals</a><a id="Internals-1"></a><a class="docs-heading-anchor-permalink" href="#Internals" title="Permalink"></a></h3><article><details class="docstring" open="true"><summary id="ClimaAtmos.parallel_lu_factorize!"><a class="docstring-binding" href="#ClimaAtmos.parallel_lu_factorize!"><code>ClimaAtmos.parallel_lu_factorize!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">parallel_lu_factorize!(device, matrices, ::Val{N})</code></pre><p>Runs a parallel LU factorization algorithm on the specified <code>device</code>. If each slice <code>matrices[1:N, 1:N, i]</code> represents a matrix <span>$Mᵢ$</span>, this function overwrites it with the lower triangular matrix <span>$Lᵢ$</span> and the upper triangular matrix <span>$Uᵢ$</span>, where <span>$Mᵢ = Lᵢ * Uᵢ$</span>. The value of <code>N</code> must be wrapped in a <code>Val</code> to ensure that it is statically inferrable, which allows the LU factorization to avoid dynamic local memory allocations.</p><p>The runtime of this algorithm scales as <span>$O(N^3)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/prognostic_equations/implicit/auto_dense_jacobian.jl#L262-L273">source</a></section></details></article><article><details class="docstring" open="true"><summary id="ClimaAtmos.parallel_lu_solve!"><a class="docstring-binding" href="#ClimaAtmos.parallel_lu_solve!"><code>ClimaAtmos.parallel_lu_solve!</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">parallel_lu_solve!(device, vectors, matrices, ::Val{N})</code></pre><p>Runs a parallel LU solver algorithm on the specified <code>device</code>. If each slice <code>vectors[1:N, i]</code> represents a vector <span>$vᵢ$</span>, and if each slice <code>matrices[1:N, 1:N, i]</code> represents a matrix <span>$Lᵢ * Uᵢ$</span> that was factorized by <a href="#ClimaAtmos.parallel_lu_factorize!"><code>parallel_lu_factorize!</code></a>, this function overwrites the slice <code>vectors[1:N, i]</code> with <span>$(Lᵢ * Uᵢ)⁻¹ * vᵢ$</span>. The value of <code>N</code> must be wrapped in a <code>Val</code> to ensure that it is statically inferrable, which allows the LU solver to avoid dynamic local memory allocations.</p><p>The runtime of this algorithm scales as <span>$O(N^2)$</span>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaAtmos.jl/blob/bfa8afd83cbd14ccd7b5d65fe34aa8a2f4e47ccf/src/prognostic_equations/implicit/auto_dense_jacobian.jl#L305-L317">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../itime/">« The time type</a><a class="docs-footer-nextpage" href="../references/">References »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.17.0 on <span class="colophon-date" title="Saturday 28 February 2026 01:48">Saturday 28 February 2026</span>. Using Julia version 1.11.9.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
