# drive all conditions with ERA5
initial_condition: "ReanalysisTimeVarying"
external_forcing: "ReanalysisMonthlyAveragedDiurnal"
surface_setup: "ReanalysisTimeVarying"
surface_temperature: "ReanalysisTimeVarying"
start_date: "20070701"
site_latitude: -50.0
site_longitude: 90.0
# site_latitude: -49.20000076293945 # CAN PLAY W THIS LOCATION AS WELL
# site_longitude: 69.30000305175781
# site_latitude: 17.0 # CAN PLAY W THIS LOCATION AS WELL
# site_longitude: -149.0
# start_date: "20070401"
# site_latitude: -20.0
# site_longitude: -77.5

# use diagnostic EDMF 
turbconv: "diagnostic_edmfx"
z_max: 60e3
z_elem: 150
netcdf_output_at_levels: true
t_end: "6days" # 11 days
dt: "30secs"
dz_bottom: 30

# solve implicitly
implicit_diffusion: true
implicit_sgs_advection: true
implicit_sgs_mass_flux: true
implicit_sgs_entr_detr: true
implicit_sgs_nh_pressure: true

# noneq -- sparse autojacobian
implicit_noneq_cloud_formation: false
use_auto_jacobian: true
update_jacobian_every: dt
debug_jacobian: true

approximate_linear_solve_iters: 2
edmfx_upwinding: first_order
edmfx_sgsflux_upwinding: first_order
tracer_upwinding: vanleer_limiter
energy_upwinding: vanleer_limiter
rayleigh_sponge: true
edmfx_entr_model: "PiGroups"
edmfx_detr_model: "SmoothArea"
edmfx_sgs_mass_flux: true
edmfx_sgs_diffusive_flux: true
edmfx_nh_pressure: true
edmfx_filter: true
prognostic_tke: true
precip_model: "1M"
prescribe_ozone: false
moist: "nonequil"
config: "column"
z_stretch: true
perturb_initstate: false
dt_rad: "10mins"
cloud_model: "grid_scale"
call_cloud_diagnostics_per_stage: true
toml: [toml/diagnostic_edmfx_1M.toml]
# toml: [tomls/diagnostic_precalibrated.toml, tomls/deep_forcing_relaxation.toml]
output_default_diagnostics: false
rad: allskywithclear
insolation: "externaldriventv"
# diagnostics:
#   - short_name: [lwp, clivi]
#     period: 1hours
# diagnostics:
#   - short_name: [ts, ta, thetaa, ha, pfull, rhoa, ua, va, wa, hur, hus, cl, clw, cli, hussfc, evspsbl, pr]
#     period: 10mins
#   - short_name: [arup, waup, taup, thetaaup, haup, husup, hurup, clwup, cliup, waen, tke]
#     period: 10mins
#   - short_name: [entr, detr, lmix, bgrad, strain, edt, evu]
#     period: 10mins
#   - short_name: [husra, hussn, lwp, clivi]
#     period: 10mins
diagnostics:
  - short_name: [lwp, clivi, clw, cli, cltz]
    period: 1hours