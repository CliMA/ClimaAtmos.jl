agents:
  queue: new-central
  slurm_mem: 8G
  modules: climacommon/2025_03_18

env:
  JULIA_LOAD_PATH: "${JULIA_LOAD_PATH}:${BUILDKITE_BUILD_CHECKOUT_PATH}/.buildkite"
  OPENBLAS_NUM_THREADS: 1
  SLURM_KILL_BAD_EXIT: 1
  JULIA_NVTX_CALLBACKS: gc
  JULIA_MAX_NUM_PRECOMPILE_FILES: 100
  JULIA_DEPOT_PATH: "${BUILDKITE_BUILD_PATH}/${BUILDKITE_PIPELINE_SLUG}/depot/default"
  COMMON_CONFIG_PATH: "config/common_configs"
  CONFIG_PATH: "config/model_configs"
  GPU_CONFIG_PATH: "config/gpu_configs"
  PERF_CONFIG_PATH: "config/perf_configs"
  MPI_CONFIG_PATH: "config/mpi_configs"

steps:
  - label: "init :computer:"
    key: "init_cpu_env"
    concurrency: 1
    concurrency_group: 'depot/climaatmos-ci'
    command:
      - "echo $$JULIA_DEPOT_PATH"

      - echo "--- Check that ClimaAtmos is developed in Manifest"
      - julia --check-bounds=yes -e 'using TOML; @assert TOML.parsefile(".buildkite/Manifest-v1.11.toml")["deps"]["ClimaAtmos"][1]["path"] == ".."'

      - echo "--- Instantiate .buildkite"
      - "julia --project=.buildkite -e 'using Pkg; Pkg.instantiate(;verbose=true); Pkg.precompile(;strict=true); using CUDA; CUDA.precompile_runtime(); Pkg.status()'"

    agents:
      slurm_cpus_per_task: 8
      slurm_gpus: 1
    env:
      JULIA_NUM_PRECOMPILE_TASKS: 8
      JULIA_MAX_NUM_PRECOMPILE_FILES: 50

  - wait

  - group: "Float64 Schar Mountain Tests"
    steps:

      - label: "h_max = 0.000000001 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_0.000000001m_schar_mountain_float64_test.yml
          --job_id gpu_plane_0.000000001m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_0.000000001m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      # - label: "h_max = 0.000000002 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000002m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000002m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000002m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000004 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000004m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000004m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000004m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000008 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000008m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000008m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000008m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000016 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000016m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000016m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000016m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000032 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000032m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000032m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000032m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000064 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000064m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000064m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000064m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000128 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000128m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000128m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000128m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000160 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000160m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000160m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000160m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000192 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000192m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000192m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000192m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000224 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000224m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000224m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000224m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000228 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000228m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000228m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000228m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000232 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000232m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000232m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000232m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000236 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000236m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000236m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000236m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000240 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000240m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000240m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000240m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000244 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000244m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000244m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000244m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000248 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000248m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000248m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000248m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000252 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000252m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000252m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000252m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000256 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000256m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000256m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000256m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000512 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000512m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000000512m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000000512m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000001024 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000001024m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.000001024m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.000001024m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      - label: "h_max = 0.00001 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_0.00001m_schar_mountain_float64_test.yml
          --job_id gpu_plane_0.00001m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_0.00001m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      # - label: "h_max = 0.0001 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.0001m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_0.0001m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_0.0001m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      - label: "h_max = 0.001 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_0.001m_schar_mountain_float64_test.yml
          --job_id gpu_plane_0.001m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_0.001m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 0.01 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_0.01m_schar_mountain_float64_test.yml
          --job_id gpu_plane_0.01m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_0.01m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 0.1 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_0.1m_schar_mountain_float64_test.yml
          --job_id gpu_plane_0.1m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_0.1m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 1 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_1m_schar_mountain_float64_test.yml
          --job_id gpu_plane_1m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_1m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 3 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_3m_schar_mountain_float64_test.yml
          --job_id gpu_plane_3m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_3m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 6 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_6m_schar_mountain_float64_test.yml
          --job_id gpu_plane_6m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_6m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 12 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_12m_schar_mountain_float64_test.yml
          --job_id gpu_plane_12m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_12m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 25 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_25m_schar_mountain_float64_test.yml
          --job_id gpu_plane_25m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_25m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 50 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_50m_schar_mountain_float64_test.yml
          --job_id gpu_plane_50m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_50m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 75 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_75m_schar_mountain_float64_test.yml
          --job_id gpu_plane_75m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_75m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 100 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_100m_schar_mountain_float64_test.yml
          --job_id gpu_plane_100m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_100m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 125 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_125m_schar_mountain_float64_test.yml
          --job_id gpu_plane_125m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_125m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 150 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_150m_schar_mountain_float64_test.yml
          --job_id gpu_plane_150m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_150m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 175 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_175m_schar_mountain_float64_test.yml
          --job_id gpu_plane_175m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_175m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 200 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_200m_schar_mountain_float64_test.yml
          --job_id gpu_plane_200m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_200m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 225 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_225m_schar_mountain_float64_test.yml
          --job_id gpu_plane_225m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_225m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 250 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_250m_schar_mountain_float64_test.yml
          --job_id gpu_plane_250m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_250m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 300 m with Float64"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_300m_schar_mountain_float64_test.yml
          --job_id gpu_plane_300m_schar_mountain_float64_test
        artifact_paths: "gpu_plane_300m_schar_mountain_float64_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      # - label: "h_max = 350 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_350m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_350m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_350m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 400 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_400m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_400m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_400m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 450 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_450m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_450m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_450m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 500 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_500m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_500m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_500m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 550 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_550m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_550m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_550m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 600 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_600m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_600m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_600m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 650 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_650m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_650m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_650m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 700 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_700m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_700m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_700m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 750 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_750m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_750m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_750m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 800 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_800m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_800m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_800m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 850 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_850m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_850m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_850m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 900 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_900m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_900m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_900m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 950 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_950m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_950m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_950m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 1000 m with Float64"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_1000m_schar_mountain_float64_test.yml
      #     --job_id gpu_plane_1000m_schar_mountain_float64_test
      #   artifact_paths: "gpu_plane_1000m_schar_mountain_float64_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

  - group: "Float32 Schar Mountain Tests"
    steps:

      - label: "h_max = 0.000000001 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_0.000000001m_schar_mountain_float32_test.yml
          --job_id gpu_plane_0.000000001m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_0.000000001m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      # - label: "h_max = 0.000000002 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000002m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000002m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000002m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000004 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000004m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000004m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000004m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000008 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000008m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000008m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000008m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000016 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000016m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000016m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000016m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000032 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000032m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000032m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000032m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000064 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000064m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000064m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000064m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000128 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000128m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000128m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000128m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000160 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000160m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000160m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000160m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000192 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000192m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000192m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000192m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000224 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000224m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000224m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000224m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000228 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000228m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000228m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000228m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000232 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000232m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000232m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000232m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000236 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000236m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000236m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000236m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000240 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000240m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000240m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000240m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000244 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000244m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000244m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000244m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000248 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000248m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000248m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000248m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000252 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000252m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000252m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000252m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000256 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000256m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000256m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000256m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000000512 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000000512m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000000512m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000000512m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 0.000001024 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.000001024m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.000001024m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.000001024m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      - label: "h_max = 0.00001 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_0.00001m_schar_mountain_float32_test.yml
          --job_id gpu_plane_0.00001m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_0.00001m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      # - label: "h_max = 0.0001 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_0.0001m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_0.0001m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_0.0001m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      - label: "h_max = 0.001 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_0.001m_schar_mountain_float32_test.yml
          --job_id gpu_plane_0.001m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_0.001m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 0.01 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_0.01m_schar_mountain_float32_test.yml
          --job_id gpu_plane_0.01m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_0.01m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 0.1 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_0.1m_schar_mountain_float32_test.yml
          --job_id gpu_plane_0.1m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_0.1m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 1 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_1m_schar_mountain_float32_test.yml
          --job_id gpu_plane_1m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_1m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 3 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_3m_schar_mountain_float32_test.yml
          --job_id gpu_plane_3m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_3m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 6 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_6m_schar_mountain_float32_test.yml
          --job_id gpu_plane_6m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_6m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 12 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_12m_schar_mountain_float32_test.yml
          --job_id gpu_plane_12m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_12m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 25 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_25m_schar_mountain_float32_test.yml
          --job_id gpu_plane_25m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_25m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 50 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_50m_schar_mountain_float32_test.yml
          --job_id gpu_plane_50m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_50m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 75 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_75m_schar_mountain_float32_test.yml
          --job_id gpu_plane_75m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_75m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 100 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_100m_schar_mountain_float32_test.yml
          --job_id gpu_plane_100m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_100m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 125 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_125m_schar_mountain_float32_test.yml
          --job_id gpu_plane_125m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_125m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 150 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_150m_schar_mountain_float32_test.yml
          --job_id gpu_plane_150m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_150m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 175 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_175m_schar_mountain_float32_test.yml
          --job_id gpu_plane_175m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_175m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 200 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_200m_schar_mountain_float32_test.yml
          --job_id gpu_plane_200m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_200m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 225 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_225m_schar_mountain_float32_test.yml
          --job_id gpu_plane_225m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_225m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 250 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_250m_schar_mountain_float32_test.yml
          --job_id gpu_plane_250m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_250m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      - label: "h_max = 300 m with Float32"
        command: >
          julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
          --config_file $CONFIG_PATH/plane_300m_schar_mountain_float32_test.yml
          --job_id gpu_plane_300m_schar_mountain_float32_test
        artifact_paths: "gpu_plane_300m_schar_mountain_float32_test/output_active/*"
        env:
          CLIMACOMMS_DEVICE: "CUDA"
        agents:
          slurm_gpus: 1

      # - label: "h_max = 350 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_350m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_350m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_350m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 400 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_400m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_400m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_400m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 450 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_450m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_450m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_450m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 500 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_500m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_500m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_500m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 550 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_550m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_550m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_550m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 600 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_600m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_600m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_600m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 650 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_650m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_650m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_650m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 700 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_700m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_700m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_700m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 750 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_750m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_750m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_750m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 800 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_800m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_800m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_800m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 850 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_850m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_850m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_850m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 900 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_900m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_900m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_900m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 950 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_950m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_950m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_950m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1

      # - label: "h_max = 1000 m with Float32"
      #   command: >
      #     julia --color=yes --project=.buildkite .buildkite/ci_driver.jl
      #     --config_file $CONFIG_PATH/plane_1000m_schar_mountain_float32_test.yml
      #     --job_id gpu_plane_1000m_schar_mountain_float32_test
      #   artifact_paths: "gpu_plane_1000m_schar_mountain_float32_test/output_active/*"
      #   env:
      #     CLIMACOMMS_DEVICE: "CUDA"
      #   agents:
      #     slurm_gpus: 1
