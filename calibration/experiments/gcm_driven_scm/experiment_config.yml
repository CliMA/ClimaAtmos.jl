# prior_path: prior_prognostic.toml
# prior_path: prior_prognostic_pi_entr_dev_mixlen.toml
# prior_path: prior_prognostic_pi_entr_dev_microphysics2.toml
# prior_path: prior_prognostic_pi_entr_dev_microphysics.toml
# prior_path: prior_precal_intermediate_std.toml
# prior_path: prior_precal_intermediate_std_w_nearest_neig_entr.toml
# prior_path: prior_precal_nearest_neighbor_same_std.toml
# prior_path: prior_nn_tke_only.toml
# prior_path: prior_prognostic_pi_entr_ml_mix_no_precal_exp1.toml
prior_path: prior_nearest_neig_particle_i9_m3_precal_exp2_tighten_std.toml

# prior_path: prior_precal_same_std.toml
# prior_path: prior_prognostic_pi_entr_dev_microphysics_exact_precal.toml
ensemble_size: 250
n_iterations: 10
batch_size: 30 # number of cases per iteration
model_config : model_config_prognostic.yml # options {model_config_prognostic.yml, model_config_diagnostic.yml}
output_dir : /groups/esm/cchristo/climaatmos_scm_calibrations/output_ml_mix/exp_43 # output dir
y_var_names: [thetaa, hus, clw] # calibration variables clw
log_vars: ["clw"] # take log(var) when forming y, g

nice_loc_ug: 0.01
nice_loc_gg: 0.5

# z_max: # spatial subsetting: use statistics from [0, z_max] (in [m]) for calibration
#   shallow: 4000.0
#   deep: 15000.0
z_max: null
z_cal_grid: # calibration grid (stretch-grid parameters). In general, `z_elem` should be the same for all types
  shallow:
    z_max: 4000.0
    z_elem: 30
    dz_bottom: 30
  deep:
    z_max: 15000.0
    z_elem: 30
    dz_bottom: 30
dims_per_var : 30 # num dimensions per variable (num cells in vertical profile below z_max)
# eki_timestep: 0.1 # timestep of eki, if using default

y_t_start_sec: # start time of LES averaging window [s]
  shallow: 475200.0 # 5.5 days
  deep: 302400.0 # 3.5 days
y_t_end_sec: # end time of LES averaging window [s]
  shallow: 518400.0 # 6 days (LES length = 6 days)
  deep: 345600.0 # 4 days (LES length = 4 days)
g_t_start_sec: 216000.0 # start time of SCM averaging window [s] : 2.5 days
g_t_end_sec: 259200.0 # end time of SCM averaging window [s] : 3 days (SCM length = 3 days)

norm_factors_by_var:
  thetaa: [301.218, 15.235]
  hus: [0.00672, 0.00477]
  clw: [-9.579, 3.164] # log norm factors
  cli: [-11.697, 1.304] # log norm factors

# const_noise_by_var:
#   thetaa: 0.0036
#   hus: 0.0036
#   clw: 0.0036
#   cli: 0.01

const_noise_by_var:
  thetaa: 0.0016
  hus: 0.0016
  clw: 0.0016
  cli: 0.01


# pretrained_nn_path: "/home/cchristo/ml_mixing_length/nn_341p_v1.jld2"
# pretrained_nn_path: "/home/cchristo/ml_mixing_length/nn_341p_v5.jld2"
# pretrained_nn_path: "/home/cchristo/ml_mixing_length/prev_scripts/nn_341p_v1.jld2"
pretrained_nn_path: "/home/cchristo/ml_mixing_length/nn_666p_final.jld2"